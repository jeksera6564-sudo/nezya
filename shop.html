<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∏–∑–Ω–µ—Å –ò–º–ø–µ—Ä–∏—è ‚Äî –ú–∞–≥–∞–∑–∏–Ω</title>
    <style>
        body { 
            background: radial-gradient(circle at center, #1a1a2e 0%, #020205 100%);
            color: white; font-family: 'Segoe UI', sans-serif; padding: 20px; margin: 0;
            overflow-x: hidden;
        }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: -1; }
        
        .stats { display: flex; justify-content: center; gap: 15px; margin-bottom: 25px; position: sticky; top: 10px; z-index: 100; }
        .balance { background: rgba(0,0,0,0.9); padding: 12px 25px; border-radius: 30px; border: 1px solid #ffd700; font-weight: bold; backdrop-filter: blur(10px); box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; max-width: 900px; margin: 0 auto; }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏ */
        .card { background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 20px; border-radius: 20px; text-align: center; border: 2px solid; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); }
        
        .rare-common { border-color: #4ae38d; box-shadow: 0 0 10px rgba(74, 227, 141, 0.2); } /* –ó–µ–ª–µ–Ω—ã–π */
        .rare-rare { border-color: #00d2ff; box-shadow: 0 0 10px rgba(0, 210, 255, 0.2); }   /* –°–∏–Ω–∏–π */
        .rare-epic { border-color: #a020f0; box-shadow: 0 0 10px rgba(160, 32, 240, 0.2); }  /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π */
        .rare-legend { border-color: #ff8c00; box-shadow: 0 0 15px rgba(255, 140, 0, 0.4); } /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
        .rare-mythic { border-color: #ff4d4d; box-shadow: 0 0 20px rgba(255, 77, 77, 0.5); }  /* –ö—Ä–∞—Å–Ω—ã–π */

        .card h3 { margin-bottom: 10px; font-size: 1.1em; }
        .card p { font-size: 0.9em; color: #ccc; margin: 5px 0; }
        .card b { color: #ffd700; font-size: 1.1em; }

        button { width: 100%; padding: 12px; margin-top: 15px; border-radius: 15px; border: none; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-gold { background: #ffd700; color: #000; }
        .btn-diamond { background: #00d2ff; color: #000; }
        button:disabled { background: #333 !important; color: #777 !important; cursor: not-allowed; }
        button:active { transform: scale(0.95); }

        .back { display: block; text-align: center; margin: 40px auto; color: #fff; text-decoration: none; font-weight: bold; background: rgba(255,255,255,0.1); width: fit-content; padding: 12px 40px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.3); transition: 0.2s; }
        .back:hover { background: #fff; color: #000; }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <div class="stats">
        <div class="balance">ü™ô <span id="coins">0</span></div>
        <div class="balance">üíé <span id="crystals">0</span></div>
    </div>

    <h2 style="text-align:center; margin-bottom:10px; text-transform: uppercase; letter-spacing: 2px;">–ë–∏–∑–Ω–µ—Å –ò–º–ø–µ—Ä–∏—è</h2>
    <p style="text-align:center; color: #888; margin-bottom: 30px;">–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥: <span id="totalIncome" style="color:#4ae38d; font-weight:bold;">0</span> ü™ô/—Å–µ–∫</p>
    
    <div class="grid" id="incomeShop"></div>

    <a href="index.html" class="back">‚¨Ö –ù–ê –ì–õ–ê–í–ù–£–Æ</a>

    <script>
        // –î–∞–Ω–Ω—ã–µ –æ –±–∏–∑–Ω–µ—Å–∞—Ö
        const list = {
            startup: { name: "üöÄ –°—Ç–∞—Ä—Ç–∞–ø", base: 500, inc: 2, rare: "rare-common", cur: "gold" },
            market:  { name: "üõí –°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç", base: 5000, inc: 15, rare: "rare-rare", cur: "gold" },
            factory: { name: "üè≠ –¢–µ—Ö–Ω–æ–∑–∞–≤–æ–¥", base: 50000, inc: 120, rare: "rare-epic", cur: "gold" },
            oil:     { name: "üî• –ù–µ—Ñ—Ç—è–Ω–∞—è –í—ã—à–∫–∞", base: 100, inc: 1000, rare: "rare-legend", cur: "diamond" },
            bank:    { name: "ü™ê –ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ë–∞–Ω–∫", base: 1000, inc: 15000, rare: "rare-mythic", cur: "diamond" }
        };

        let state = {
            coins: +localStorage.getItem("coins") || 0,
            crystals: +localStorage.getItem("crystals") || 0,
            incomes: JSON.parse(localStorage.getItem("incomes")) || {}
        };

        const getPrice = (base, lvl) => Math.floor(base * Math.pow(1.6, lvl || 0));

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫—É–ø–∫–∏
        window.buy = (k) => {
            const biz = list[k];
            const lvl = state.incomes[k] || 0;
            const price = getPrice(biz.base, lvl);

            if (biz.cur === "gold") {
                if (state.coins >= price) {
                    state.coins -= price;
                    state.incomes[k] = lvl + 1;
                    completePurchase();
                }
            } else {
                if (state.crystals >= price) {
                    state.crystals -= price;
                    state.incomes[k] = lvl + 1;
                    completePurchase();
                }
            }
        };

        function completePurchase() {
            localStorage.setItem("coins", state.coins);
            localStorage.setItem("crystals", state.crystals);
            localStorage.setItem("incomes", JSON.stringify(state.incomes));
            render();
        }

        function calculateIncome() {
            let total = 0;
            for (let k in list) {
                const lvl = state.incomes[k] || 0;
                total += lvl * list[k].inc;
            }
            return total;
        }

        function render() {
            document.getElementById("coins").textContent = Math.floor(state.coins).toLocaleString();
            document.getElementById("crystals").textContent = state.crystals.toLocaleString();
            
            const incomePerSec = calculateIncome();
            document.getElementById("totalIncome").textContent = incomePerSec.toLocaleString();

            const container = document.getElementById("incomeShop");
            container.innerHTML = "";
            
            for (let k in list) {
                const biz = list[k];
                const lvl = state.incomes[k] || 0;
                const price = getPrice(biz.base, lvl);
                const canBuy = biz.cur === "gold" ? state.coins >= price : state.crystals >= price;
                const icon = biz.cur === "gold" ? "ü™ô" : "üíé";
                const btnClass = biz.cur === "gold" ? "btn-gold" : "btn-diamond";

                container.innerHTML += `
                    <div class="card ${biz.rare}">
                        <h3>${biz.name}</h3>
                        <p>–£—Ä–æ–≤–µ–Ω—å: <b>${lvl}</b></p>
                        <p>–î–æ—Ö–æ–¥: +${(lvl * biz.inc).toLocaleString()} /—Å</p>
                        <p>–¶–µ–Ω–∞: <b>${price.toLocaleString()} ${icon}</b></p>
                        <button class="${btnClass}" ${!canBuy ? 'disabled' : ''} onclick="buy('${k}')">
                            –£–õ–£–ß–®–ò–¢–¨
                        </button>
                    </div>`;
            }
        }

        // –°–∏—Å—Ç–µ–º–∞ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞
        setInterval(() => {
            const income = calculateIncome();
            if (income > 0) {
                state.coins += income;
                localStorage.setItem("coins", state.coins);
                render();
            }
        }, 1000);

        render();
    </script>
</body>
</html>
