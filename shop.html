<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ú–∞–≥–∞–∑–∏–Ω ‚Äî Nezi</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  color: white;
  min-height: 100vh;
  background:
    linear-gradient(rgba(0,0,0,0.65), rgba(0,0,0,0.85)),
    url("assets/shop-bg.jpg") center / cover no-repeat fixed;
}

/* –≤–µ—Ä—Ö */
.top {
  display: flex;
  justify-content: center;
  gap: 12px;
  padding: 14px;
}

.balance {
  background: rgba(0,0,0,0.65);
  padding: 8px 18px;
  border-radius: 20px;
  font-size: 18px;
  display: flex;
  align-items: center;
  gap: 6px;
}

/* –∫–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ */
.back-wrap {
  text-align: center;
  margin: 6px 0 6px;
}

.back {
  background: gold;
  padding: 8px 22px;
  border-radius: 22px;
  color: black;
  font-weight: bold;
  text-decoration: none;
}

/* –∑–∞–≥–æ–ª–æ–≤–∫–∏ */
h1, h2 {
  text-align: center;
  margin: 8px 0;
}

/* –º–∞–≥–∞–∑–∏–Ω */
.shop {
  padding: 20px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
  gap: 16px;
  padding-bottom: 80px;
}

.item {
  background: rgba(255,255,255,0.14);
  border-radius: 18px;
  padding: 16px;
  text-align: center;
}

.item button {
  margin-top: 10px;
  padding: 8px 18px;
  border-radius: 20px;
  border: none;
  background: gold;
  font-weight: bold;
  cursor: pointer;
}

.item button:disabled {
  background: #666;
  color: #aaa;
  cursor: not-allowed;
}

.lock {
  color: #ff7b7b;
  font-size: 13px;
  margin-top: 6px;
}
</style>
</head>

<body>

<!-- –í–ê–õ–Æ–¢–´ -->
<div class="top">
  <div class="balance">ü™ô <span id="coins">0</span></div>
  <div class="balance">üíé <span id="crystals">0</span></div>
</div>

<div class="back-wrap">
  <a href="index.html" class="back">‚¨Ö –ù–∞–∑–∞–¥</a>
</div>

<h1>üè¶ –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞</h1>
<div class="shop" id="incomeShop"></div>

<h2>‚ú® –£–ª—É—á—à–µ–Ω–∏—è</h2>
<div class="shop" id="upgradeShop"></div>

<script>
let coins = Number(localStorage.getItem("coins")) || 0;
let crystals = Number(localStorage.getItem("crystals")) || 0;
let clicks = Number(localStorage.getItem("clicks")) || 0;

let incomes = JSON.parse(localStorage.getItem("incomes")) || {
  lemonade: 0, shop: 0, factory: 0, bank: 0, corporation: 0, legendary: 0
};

let upgrades = JSON.parse(localStorage.getItem("upgrades")) || {
  clickPower: 0,
  autoIncome: 0,
  critChance: 0,
  magnet: 0,
  incomeBoost: 0,
  crystalClick: 0,
  crystalIncome: 0,
  ultraBoost: 0
};

const incomeList = {
  lemonade: { name: "üçã –õ–∏–º–æ–Ω–∞–¥", basePrice: 300, income: 3 },
  shop: { name: "üè™ –ú–∞–≥–∞–∑–∏–Ω", basePrice: 3000, income: 30 },
  factory: { name: "üè≠ –§–∞–±—Ä–∏–∫–∞", basePrice: 30000, income: 300 },
  bank: { name: "üè¶ –ë–∞–Ω–∫", basePrice: 300000, income: 3000 },
  corporation: { name: "üè¢ –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è", basePrice: 900000, income: 9000 },
  legendary: {
    name: "üëë –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è",
    basePrice: 1000000,
    income: 50000,
    legendary: true
  }
};

/* –æ–±—ã—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∑–∞ –º–æ–Ω–µ—Ç—ã */
const coinUpgrades = {
  clickPower: { name: "‚ö° –£—Å–∏–ª–µ–Ω–∏–µ –∫–ª–∏–∫–∞", price: 5000, desc: "+1 –∫ –∫–ª–∏–∫—É", cur: "coins" },
  incomeBoost: { name: "üèÜ –ë—É—Å—Ç –¥–æ—Ö–æ–¥–∞", price: 75000, desc: "+10% –¥–æ—Ö–æ–¥–∞", cur: "coins" }
};

/* –¥–æ—Ä–æ–≥–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –∑–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã */
const crystalUpgrades = {
  crystalClick: { name: "üíé –ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–π –∫–ª–∏–∫", price: 30, desc: "+2 –∫ –∫–ª–∏–∫—É", cur: "crystals" },
  crystalIncome: { name: "üí† –ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥", price: 40, desc: "+20% –¥–æ—Ö–æ–¥–∞", cur: "crystals" },
  ultraBoost: { name: "üöÄ –£–ª—å—Ç—Ä–∞-–±—É—Å—Ç", price: 50, desc: "x2 –∫–æ –≤—Å–µ–º—É", cur: "crystals" }
};

const coinsEl = document.getElementById("coins");
const crystalsEl = document.getElementById("crystals");

coinsEl.textContent = coins;
crystalsEl.textContent = crystals;

const incomeShop = document.getElementById("incomeShop");
const upgradeShop = document.getElementById("upgradeShop");

function price(base, lvl) {
  return Math.floor(base * (1 + lvl * 0.6));
}

function render() {
  incomeShop.innerHTML = "";
  upgradeShop.innerHTML = "";

  for (let key in incomeList) {
    const data = incomeList[key];
    const lvl = incomes[key];
    const cost = price(data.basePrice, lvl);
    const locked = data.legendary && (coins < 1_000_000 || clicks < 1000);

    const el = document.createElement("div");
    el.className = "item";
    el.innerHTML = `
      <h3>${data.name}</h3>
      <p>–£—Ä–æ–≤–µ–Ω—å: ${lvl}</p>
      <p>+${data.income * lvl} ü™ô / —Å–µ–∫</p>
      <p><b>${cost.toLocaleString()} ü™ô</b></p>
      ${locked ? `<div class="lock">1000 –∫–ª–∏–∫–æ–≤<br>1 000 000 ü™ô</div>` : ""}
      <button ${locked || coins < cost ? "disabled" : ""}>–ö—É–ø–∏—Ç—å</button>
    `;

    if (!locked && coins >= cost) {
      el.querySelector("button").onclick = () => {
        coins -= cost;
        incomes[key]++;
        save();
      };
    }
    incomeShop.appendChild(el);
  }

  const allUpgrades = { ...coinUpgrades, ...crystalUpgrades };

  for (let key in allUpgrades) {
    const up = allUpgrades[key];
    const bought = upgrades[key];
    const enough = up.cur === "coins" ? coins >= up.price : crystals >= up.price;

    const el = document.createElement("div");
    el.className = "item";
    el.innerHTML = `
      <h3>${up.name}</h3>
      <p>${up.desc}</p>
      <p><b>${up.price} ${up.cur === "coins" ? "ü™ô" : "üíé"}</b></p>
      <button ${bought || !enough ? "disabled" : ""}>
        ${bought ? "–ö—É–ø–ª–µ–Ω–æ" : "–ö—É–ø–∏—Ç—å"}
      </button>
    `;

    if (!bought && enough) {
      el.querySelector("button").onclick = () => {
        if (up.cur === "coins") coins -= up.price;
        else crystals -= up.price;
        upgrades[key] = 1;
        save();
      };
    }
    upgradeShop.appendChild(el);
  }
}

function save() {
  localStorage.setItem("coins", coins);
  localStorage.setItem("crystals", crystals);
  localStorage.setItem("incomes", JSON.stringify(incomes));
  localStorage.setItem("upgrades", JSON.stringify(upgrades));
  coinsEl.textContent = coins;
  crystalsEl.textContent = crystals;
  render();
}

render();
</script>

</body>
</html>
