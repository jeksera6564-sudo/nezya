<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEON CASINO ‚Äî VIP EDITION</title>
    <style>
        :root {
            --gold: #ffd700;
            --neon-blue: #00d2ff;
            --neon-purple: #9d00ff;
            --neon-red: #ff3131;
            --neon-green: #39ff14;
            --bg: #020205;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Segoe UI', sans-serif; }
        
        body { 
            background: var(--bg); color: white;
            display: flex; flex-direction: column; align-items: center; min-height: 100vh;
            overflow-x: hidden; padding-bottom: 50px;
        }

        /* --- –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ --- */
        .balance-top { position: sticky; top: 0; display: flex; gap: 10px; z-index: 100; background: rgba(0,0,0,0.8); padding: 15px; width: 100%; justify-content: center; backdrop-filter: blur(10px); border-bottom: 1px solid #333; }
        .bal { background: #111; padding: 8px 15px; border-radius: 12px; border: 1px solid var(--gold); font-weight: 900; min-width: 100px; text-align: center; font-size: 14px; }

        /* --- –ù–ê–í–ò–ì–ê–¶–ò–Ø --- */
        .game-nav { display: flex; gap: 10px; margin: 20px 0; background: #111; padding: 5px; border-radius: 15px; border: 1px solid #333; }
        .nav-btn { padding: 10px 20px; border-radius: 10px; border: none; background: transparent; color: #666; font-weight: 900; cursor: pointer; transition: 0.3s; }
        .nav-btn.active { background: var(--neon-blue); color: #000; box-shadow: 0 0 15px var(--neon-blue); }

        .game-section { display: none; flex-direction: column; align-items: center; width: 100%; animation: fadeIn 0.4s ease; }
        .game-section.active { display: flex; }

        /* --- –ò–ì–†–û–í–ê–Ø –ó–û–ù–ê CRASH --- */
        .crash-area {
            width: 92%; max-width: 400px; height: 320px; 
            background: radial-gradient(circle at bottom left, rgba(0, 210, 255, 0.15), transparent);
            border: 2px solid rgba(0, 210, 255, 0.3); border-radius: 24px;
            position: relative; overflow: hidden; margin-bottom: 20px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.5);
        }

        /* –†–∞–∫–µ—Ç–∞ */
        #rocket {
            position: absolute; bottom: 10%; left: 10%; font-size: 45px; z-index: 5;
            display: none; filter: drop-shadow(0 0 15px var(--neon-blue));
            transform-origin: center;
        }

        #multText { font-size: 65px; font-weight: 900; z-index: 10; text-shadow: 0 0 25px var(--neon-blue); transition: 0.1s; pointer-events: none; }

        /* --- –ú–ê–ì–ê–ó–ò–ù –ë–£–°–¢–û–í (MODAL) --- */
        .shop-btn { background: var(--neon-purple); color: white; border: none; padding: 12px 20px; border-radius: 14px; margin-bottom: 15px; cursor: pointer; font-weight: 900; box-shadow: 0 0 10px var(--neon-purple); }
        .shop-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .shop-card { background: #0a0a0c; border: 2px solid var(--neon-purple); padding: 30px; border-radius: 25px; width: 85%; max-width: 380px; text-align: center; }
        .boost-item { background: #151518; padding: 18px; border-radius: 15px; margin: 12px 0; display: flex; justify-content: space-between; align-items: center; border: 1px solid #222; }
        .boost-item.active { border-color: var(--neon-green); background: rgba(57, 255, 20, 0.1); }

        /* --- –ö–ù–û–ü–ö–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø --- */
        .main-btn { width: 260px; padding: 18px; border-radius: 15px; border: none; font-weight: 900; font-size: 20px; cursor: pointer; transition: 0.2s; text-transform: uppercase; }
        .btn-crash { background: var(--neon-blue); color: #000; box-shadow: 0 0 20px var(--neon-blue); }
        .btn-cashout { background: var(--neon-green); color: #000; box-shadow: 0 0 20px var(--neon-green); animation: pulse 1s infinite; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.8; } 100% { opacity: 1; } }

        /* --- –≠–§–§–ï–ö–¢–´ --- */
        .explosion { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-2px, 0, 0); }
            20%, 80% { transform: translate3d(4px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-6px, 0, 0); }
            40%, 60% { transform: translate3d(6px, 0, 0); }
        }
        .boom { color: var(--neon-red) !important; text-shadow: 0 0 35px var(--neon-red) !important; }

        input { background: #111; border: 2px solid #333; color: white; padding: 12px; border-radius: 12px; width: 200px; text-align: center; font-size: 22px; margin-bottom: 20px; outline: none; }
        input:focus { border-color: var(--neon-blue); }
    </style>
</head>
<body>

    <div class="shop-overlay" id="shop">
        <div class="shop-card">
            <h2 style="color: var(--neon-purple); margin-bottom: 20px;">–£–°–ò–õ–ï–ù–ò–Ø</h2>
            <div class="boost-item" id="boost-shield">
                <div style="text-align: left;">üõ°Ô∏è <b>–°—Ç—Ä–∞—Ö–æ–≤–∫–∞</b><br><small style="color: #888;">–í–µ—Ä–Ω–µ—Ç 50% –ø—Ä–∏ –≤–∑—Ä—ã–≤–µ</small></div>
                <button onclick="buyBoost('shield', 500)" style="background:var(--neon-purple); color:white; border:none; padding:8px 15px; border-radius:10px; font-weight: bold; cursor:pointer;">500 üíé</button>
            </div>
            <p style="font-size: 11px; color: #555; margin-bottom: 20px;">–ë—É—Å—Ç –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–∏–Ω —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥</p>
            <button class="main-btn" style="background: #222; color: white; width: 100%; font-size: 16px;" onclick="document.getElementById('shop').style.display='none'">–ó–ê–ö–†–´–¢–¨</button>
        </div>
    </div>

    <div class="balance-top">
        <div class="bal" style="border-color: var(--gold);">ü™ô <span id="coins">0</span></div>
        <div class="bal" style="border-color: var(--neon-purple);">üíé <span id="crys">0</span></div>
    </div>

    <div class="game-nav">
        <button id="nav-fortune" class="nav-btn" onclick="location.href='fortune.html'">–ö–û–õ–ï–°–û</button>
        <button id="nav-crash" class="nav-btn active">CRASH üöÄ</button>
    </div>

    <div id="section-crash" class="game-section active">
        <button class="shop-btn" onclick="document.getElementById('shop').style.display='flex'">üõí –ö–£–ü–ò–¢–¨ –ë–£–°–¢–´</button>
        
        <div class="crash-area" id="canvas">
            <div id="rocket">üöÄ</div>
            <div id="multText">1.00x</div>
        </div>

        <input type="number" id="betAmount" value="1000" step="1000">
        <button id="crashBtn" class="main-btn btn-crash" onclick="crashAction()">–ü–û–°–¢–ê–í–ò–¢–¨</button>
        
        <div id="statusInfo" style="margin-top: 15px; font-weight: bold; min-height: 20px;"></div>
    </div>

    <a href="index.html" style="margin-top: 25px; color: #444; text-decoration: none; font-size: 13px;">‚Üê –ù–ê–ó–ê–î –í –ò–ì–†–£</a>

<script>
    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
    let state = {
        coins: +localStorage.getItem("coins") || 0,
        crys: +localStorage.getItem("crystals") || 0,
        boostShield: false
    };

    let isFlying = false;
    let crashInt;
    let currentMult = 1.0;

    function updateUI() {
        document.getElementById("coins").textContent = Math.floor(state.coins).toLocaleString();
        document.getElementById("crys").textContent = state.crys.toLocaleString();
        
        const status = document.getElementById("statusInfo");
        if(state.boostShield) {
            status.innerHTML = "<span style='color: var(--neon-green)'>üõ°Ô∏è –°–¢–†–ê–•–û–í–ö–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê</span>";
        } else {
            status.innerHTML = "";
        }
    }

    function buyBoost(type, price) {
        if(state.crys < price) return alert("–ú–∞–ª–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤!");
        if(state.boostShield) return alert("–ë—É—Å—Ç —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω!");
        
        state.crys -= price;
        state.boostShield = true;
        localStorage.setItem("crystals", state.crys);
        updateUI();
        document.getElementById('shop').style.display = 'none';
    }

    function crashAction() {
        const btn = document.getElementById("crashBtn");
        const rocket = document.getElementById("rocket");
        const canvas = document.getElementById("canvas");
        const text = document.getElementById("multText");

        if(!isFlying) {
            // –°–¢–ê–†–¢ –ò–ì–†–´
            const bet = +document.getElementById("betAmount").value;
            if(bet > state.coins || bet <= 0) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
            
            state.coins -= bet;
            localStorage.setItem("coins", state.coins);
            updateUI();
            
            isFlying = true;
            currentMult = 1.0;
            
            btn.textContent = "–ó–ê–ë–†–ê–¢–¨";
            btn.className = "main-btn btn-cashout";
            text.classList.remove("boom");
            canvas.classList.remove("explosion");
            
            rocket.style.display = "block";
            rocket.textContent = "üöÄ";
            rocket.style.transition = "none";
            
            // –õ–æ–≥–∏–∫–∞ –≤–∑—Ä—ã–≤–∞ (—à–∞–Ω—Å)
            let boomPoint = 1.0 + (Math.random() * Math.random() * 10);
            if(Math.random() < 0.05) boomPoint = 1.0; // –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∫—Ä–∞—à 5%

            crashInt = setInterval(() => {
                currentMult += 0.01 + (currentMult/100);
                text.textContent = currentMult.toFixed(2) + "x";
                
                // –î–≤–∏–≥–∞–µ–º —Ä–∞–∫–µ—Ç—É (–≤–≤–µ—Ä—Ö –∏ –≤–ø—Ä–∞–≤–æ)
                let x = Math.min(10 + (currentMult * 5), 85);
                let y = Math.min(10 + (currentMult * 7), 75);
                let rotate = 45 - (Math.sin(Date.now()/200) * 5); // –ü–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ
                
                rocket.style.left = x + "%";
                rocket.style.bottom = y + "%";
                rocket.style.transform = `rotate(${rotate}deg)`;

                if(currentMult >= boomPoint) {
                    // –ö–†–ê–® (–ü–†–û–ò–ì–†–´–®)
                    clearInterval(crashInt);
                    isFlying = false;
                    text.classList.add("boom");
                    text.textContent = "BOOM!";
                    canvas.classList.add("explosion");
                    rocket.textContent = "üí•";
                    rocket.style.transform = "scale(2)";
                    
                    if(state.boostShield) {
                        const refund = Math.floor(bet * 0.5);
                        state.coins += refund;
                        localStorage.setItem("coins", state.coins);
                        alert("üõ°Ô∏è –°—Ç—Ä–∞—Ö–æ–≤–∫–∞ —Å–ø–∞—Å–ª–∞! –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ " + refund + " ü™ô");
                    }
                    
                    state.boostShield = false; // –°–±—Ä–æ—Å –±—É—Å—Ç–∞
                    setTimeout(() => {
                        rocket.style.display = "none";
                        btn.textContent = "–ü–û–°–¢–ê–í–ò–¢–¨";
                        btn.className = "main-btn btn-crash";
                        updateUI();
                    }, 1500);
                }
            }, 60);

        } else {
            // –ó–ê–ë–†–ê–¢–¨ –í–´–ò–ì–†–´–®
            clearInterval(crashInt);
            isFlying = false;
            const bet = +document.getElementById("betAmount").value;
            const win = Math.floor(bet * currentMult);
            
            state.coins += win;
            localStorage.setItem("coins", state.coins);
            state.boostShield = false; // –°–±—Ä–æ—Å –±—É—Å—Ç–∞
            
            // –≠—Ñ—Ñ–µ–∫—Ç —É–ª–µ—Ç–∞ –≤ –∫–æ—Å–º–æ—Å
            rocket.style.transition = "all 0.6s ease-in";
            rocket.style.left = "150%"; rocket.style.bottom = "150%";
            
            updateUI();
            
            setTimeout(() => {
                rocket.style.display = "none";
                btn.textContent = "–ü–û–°–¢–ê–í–ò–¢–¨";
                btn.className = "main-btn btn-crash";
            }, 600);
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    updateUI();
</script>
</body>
</html>
