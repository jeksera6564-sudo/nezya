<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEON CRASH ‚Äî –†–∏—Å–∫–Ω–∏ –≤—Å–µ–º!</title>
    <style>
        :root {
            --neon-green: #39ff14;
            --neon-red: #ff3131;
            --neon-blue: #00d2ff;
            --bg: #050505;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        
        body {
            background: var(--bg); color: white; height: 100vh;
            display: flex; flex-direction: column; align-items: center; overflow: hidden;
        }

        /* –≠–∫—Ä–∞–Ω –≥—Ä–∞—Ñ–∏–∫–∞ */
        .crash-canvas {
            width: 90%; height: 40vh; margin-top: 60px;
            border: 2px solid rgba(0, 210, 255, 0.3);
            border-radius: 20px; position: relative;
            background: linear-gradient(to top, rgba(0, 210, 255, 0.05), transparent);
            display: flex; align-items: center; justify-content: center;
        }

        #multiplier {
            font-size: 80px; font-weight: 900; z-index: 10;
            text-shadow: 0 0 30px var(--neon-blue); transition: 0.1s;
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats { position: absolute; top: 20px; display: flex; gap: 20px; }
        .stat-box { background: rgba(255,255,255,0.1); padding: 10px 20px; border-radius: 15px; border: 1px solid var(--neon-blue); }

        /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
        .controls {
            width: 100%; padding: 30px; display: flex; flex-direction: column;
            align-items: center; gap: 20px; z-index: 20;
        }

        .bet-input {
            background: transparent; border: 2px solid var(--neon-blue);
            color: white; padding: 15px; border-radius: 10px; width: 200px;
            text-align: center; font-size: 20px; outline: none;
        }

        .main-btn {
            width: 250px; padding: 20px; border-radius: 50px; border: none;
            font-size: 24px; font-weight: 900; cursor: pointer; text-transform: uppercase;
            transition: 0.3s; box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .btn-start { background: var(--neon-blue); color: #000; box-shadow: 0 0 20px var(--neon-blue); }
        .btn-cashout { background: var(--neon-green); color: #000; box-shadow: 0 0 20px var(--neon-green); display: none; }
        
        /* –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä */
        .history {
            display: flex; gap: 10px; margin-top: 20px; overflow-x: auto; width: 90%;
            padding-bottom: 10px;
        }
        .history-item {
            padding: 5px 15px; border-radius: 10px; font-size: 12px; font-weight: bold;
            background: rgba(255,255,255,0.1);
        }

        .boom { color: var(--neon-red) !important; text-shadow: 0 0 30px var(--neon-red) !important; }
        .win-anim { animation: winPulse 0.5s ease; }
        @keyframes winPulse { 
            0% { transform: scale(1); } 50% { transform: scale(1.2); color: var(--neon-green); } 100% { transform: scale(1); }
        }
    </style>
</head>
<body>

    <div class="stats">
        <div class="stat-box">ü™ô <span id="coins">0</span></div>
    </div>

    <div class="crash-canvas" id="canvas">
        <div id="multiplier">1.00x</div>
    </div>

    <div class="history" id="history"></div>

    <div class="controls">
        <input type="number" id="betAmount" class="bet-input" value="1000" step="1000">
        <button id="mainBtn" class="main-btn btn-start" onclick="action()">–°–¢–ê–í–ö–ê</button>
        <a href="index.html" style="color: #444; text-decoration: none; font-size: 14px;">–í–ï–†–ù–£–¢–¨–°–Ø –ö –ö–û–õ–ï–°–£</a>
    </div>

<script>
    let coins = +localStorage.getItem("coins") || 0;
    let currentMultiplier = 1.0;
    let isFlying = false;
    let gameInterval;
    let crashPoint;

    document.getElementById("coins").textContent = coins.toLocaleString();

    function action() {
        if (!isFlying) {
            startRound();
        } else {
            cashOut();
        }
    }

    function startRound() {
        const bet = +document.getElementById("betAmount").value;
        if (bet > coins || bet <= 0) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");

        // –°–Ω–∏–º–∞–µ–º —Å—Ç–∞–≤–∫—É
        coins -= bet;
        updateCoins();

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–≥—Ä—ã
        isFlying = true;
        currentMultiplier = 1.0;
        const mainBtn = document.getElementById("mainBtn");
        mainBtn.textContent = "–ó–ê–ë–†–ê–¢–¨";
        mainBtn.className = "main-btn btn-cashout";
        mainBtn.style.display = "block";
        
        const multDisplay = document.getElementById("multiplier");
        multDisplay.classList.remove("boom");
        multDisplay.textContent = "1.00x";

        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ—á–∫—É –≤–∑—Ä—ã–≤–∞ (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ Crash)
        // –ß–µ–º –≤—ã—à–µ –º–Ω–æ–∂–∏—Ç–µ–ª—å, —Ç–µ–º –º–µ–Ω—å—à–µ —à–∞–Ω—Å
        crashPoint = generateCrashPoint();

        gameInterval = setInterval(() => {
            currentMultiplier += 0.01 * (currentMultiplier / 2); // –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–æ—Å—Ç–∞
            multDisplay.textContent = currentMultiplier.toFixed(2) + "x";

            if (currentMultiplier >= crashPoint) {
                gameOver();
            }
        }, 100);
    }

    function generateCrashPoint() {
        const e = 2**32;
        const h = crypto.getRandomValues(new Uint32Array(1))[0];
        return Math.floor((100 * e - h) / (e - h)) / 100;
    }

    function cashOut() {
        if (!isFlying) return;
        
        const bet = +document.getElementById("betAmount").value;
        const winAmount = Math.floor(bet * currentMultiplier);
        coins += winAmount;
        
        stopGame("win");
        alert(`–ü–æ–±–µ–¥–∞! –í—ã –∑–∞–±—Ä–∞–ª–∏ ${winAmount} ü™ô`);
    }

    function gameOver() {
        stopGame("lose");
        document.getElementById("multiplier").classList.add("boom");
        document.getElementById("multiplier").textContent = "BOOM! " + currentMultiplier.toFixed(2) + "x";
    }

    function stopGame(result) {
        isFlying = false;
        clearInterval(gameInterval);
        
        const mainBtn = document.getElementById("mainBtn");
        mainBtn.textContent = "–°–¢–ê–í–ö–ê";
        mainBtn.className = "main-btn btn-start";
        
        addHistory(currentMultiplier.toFixed(2), result);
        updateCoins();
    }

    function updateCoins() {
        localStorage.setItem("coins", coins);
        document.getElementById("coins").textContent = Math.floor(coins).toLocaleString();
    }

    function addHistory(val, res) {
        const hist = document.getElementById("history");
        const item = document.createElement("div");
        item.className = "history-item";
        item.style.color = res === "win" ? "var(--neon-green)" : "var(--neon-red)";
        item.textContent = val + "x";
        hist.prepend(item);
        if (hist.children.length > 10) hist.lastChild.remove();
    }
</script>
</body>
</html>
