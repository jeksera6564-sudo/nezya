<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEON CRASH ‚Äî VIP FLIGHT</title>
    <style>
        :root {
            --neon-green: #39ff14;
            --neon-red: #ff3131;
            --neon-blue: #00d2ff;
            --bg: #050505;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        
        body {
            background: var(--bg); color: white; height: 100vh;
            display: flex; flex-direction: column; align-items: center; overflow: hidden;
        }

        /* –≠–∫—Ä–∞–Ω –≥—Ä–∞—Ñ–∏–∫–∞ */
        .crash-canvas {
            width: 90%; height: 45vh; margin-top: 60px;
            border: 2px solid rgba(0, 210, 255, 0.2);
            border-radius: 20px; position: relative;
            background: radial-gradient(circle at bottom left, rgba(0, 210, 255, 0.1), transparent);
            display: flex; align-items: center; justify-content: center;
            overflow: hidden;
        }

        /* –°–∞–º–∞ —Ä–∞–∫–µ—Ç–∞ */
        #rocket {
            position: absolute;
            bottom: 10%;
            left: 10%;
            font-size: 50px;
            z-index: 5;
            transition: transform 0.1s linear;
            display: none;
            filter: drop-shadow(0 0 10px var(--neon-blue));
        }

        #multiplier {
            font-size: 80px; font-weight: 900; z-index: 10;
            text-shadow: 0 0 30px var(--neon-blue); transition: 0.1s;
            pointer-events: none;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∑—Ä—ã–≤–∞ */
        .explosion {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats { position: absolute; top: 20px; display: flex; gap: 20px; z-index: 20; }
        .stat-box { background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 15px; border: 1px solid var(--neon-blue); backdrop-filter: blur(5px); }

        /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
        .controls {
            width: 100%; padding: 20px; display: flex; flex-direction: column;
            align-items: center; gap: 15px; z-index: 20;
        }

        .bet-input {
            background: #111; border: 2px solid var(--neon-blue);
            color: white; padding: 12px; border-radius: 10px; width: 180px;
            text-align: center; font-size: 20px; outline: none;
        }

        .main-btn {
            width: 250px; padding: 18px; border-radius: 50px; border: none;
            font-size: 22px; font-weight: 900; cursor: pointer; text-transform: uppercase;
            transition: 0.3s;
        }

        .btn-start { background: var(--neon-blue); color: #000; box-shadow: 0 0 20px var(--neon-blue); }
        .btn-cashout { background: var(--neon-green); color: #000; box-shadow: 0 0 20px var(--neon-green); }
        
        .history {
            display: flex; gap: 10px; margin-top: 15px; overflow-x: auto; width: 90%;
            padding: 10px; scrollbar-width: none;
        }
        .history-item {
            padding: 5px 12px; border-radius: 8px; font-size: 12px; font-weight: bold;
            background: rgba(255,255,255,0.05); flex-shrink: 0;
        }

        .boom { color: var(--neon-red) !important; text-shadow: 0 0 30px var(--neon-red) !important; }
    </style>
</head>
<body>

    <div class="stats">
        <div class="stat-box">ü™ô <span id="coins">0</span></div>
    </div>

    <div class="crash-canvas" id="canvas">
        <div id="rocket">üöÄ</div>
        <div id="multiplier">1.00x</div>
    </div>

    <div class="history" id="history"></div>

    <div class="controls">
        <input type="number" id="betAmount" class="bet-input" value="1000" step="1000">
        <button id="mainBtn" class="main-btn btn-start" onclick="action()">–°–¢–ê–í–ö–ê</button>
        <a href="index.html" style="color: #555; text-decoration: none; font-size: 14px; margin-top: 10px;">–í–ï–†–ù–£–¢–¨–°–Ø –ö –ö–û–õ–ï–°–£</a>
    </div>

<script>
    let coins = +localStorage.getItem("coins") || 0;
    let currentMultiplier = 1.0;
    let isFlying = false;
    let gameInterval;
    let crashPoint;

    const rocket = document.getElementById("rocket");
    const canvas = document.getElementById("canvas");
    const multDisplay = document.getElementById("multiplier");
    const mainBtn = document.getElementById("mainBtn");

    document.getElementById("coins").textContent = coins.toLocaleString();

    function action() {
        if (!isFlying) startRound();
        else cashOut();
    }

    function startRound() {
        const bet = +document.getElementById("betAmount").value;
        if (bet > coins || bet <= 0) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");

        coins -= bet;
        updateCoins();

        isFlying = true;
        currentMultiplier = 1.0;
        
        // –í–∏–∑—É–∞–ª —Å—Ç–∞—Ä—Ç–∞
        mainBtn.textContent = "–ó–ê–ë–†–ê–¢–¨";
        mainBtn.className = "main-btn btn-cashout";
        multDisplay.classList.remove("boom");
        canvas.classList.remove("explosion");
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∫–µ—Ç—É
        rocket.style.display = "block";
        rocket.style.bottom = "10%";
        rocket.style.left = "10%";
        rocket.style.transform = "rotate(45deg) scale(1)";
        rocket.textContent = "üöÄ";

        crashPoint = generateCrashPoint();

        gameInterval = setInterval(() => {
            currentMultiplier += 0.01 * (currentMultiplier / 1.5); 
            multDisplay.textContent = currentMultiplier.toFixed(2) + "x";

            // –î–≤–∏–≥–∞–µ–º —Ä–∞–∫–µ—Ç—É
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–µ –≤—ã–ª–µ—Ç–µ–ª–∞ –∑–∞ —ç–∫—Ä–∞–Ω (–¥–æ 80% –≤—ã—Å–æ—Ç—ã/—à–∏—Ä–∏–Ω—ã)
            let moveX = Math.min(10 + (currentMultiplier * 5), 80);
            let moveY = Math.min(10 + (currentMultiplier * 7), 80);
            
            rocket.style.left = moveX + "%";
            rocket.style.bottom = moveY + "%";

            if (currentMultiplier >= crashPoint) {
                gameOver();
            }
        }, 80);
    }

    function generateCrashPoint() {
        // –õ–æ–≥–∏–∫–∞ –∫—Ä–∞—à–∞: —á–µ–º –≤—ã—à–µ, —Ç–µ–º —Ä–µ–∂–µ
        const rand = Math.random();
        if (rand < 0.05) return 1.05; // –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∫—Ä–∞—à 5%
        return Math.max(1.1, (1 / (1 - Math.random())).toFixed(2));
    }

    function cashOut() {
        if (!isFlying) return;
        const bet = +document.getElementById("betAmount").value;
        const winAmount = Math.floor(bet * currentMultiplier);
        coins += winAmount;
        
        // –≠—Ñ—Ñ–µ–∫—Ç –≤—ã–∏–≥—Ä—ã—à–∞: —Ä–∞–∫–µ—Ç–∞ —É–ª–µ—Ç–∞–µ—Ç –≤ –∫–æ—Å–º–æ—Å
        rocket.style.transition = "transform 1s ease-in, left 1s ease-in, bottom 1s ease-in";
        rocket.style.left = "120%";
        rocket.style.bottom = "120%";
        
        stopGame("win");
        setTimeout(() => { rocket.style.display = "none"; rocket.style.transition = "none"; }, 1000);
    }

    function gameOver() {
        canvas.classList.add("explosion");
        rocket.textContent = "üí•";
        rocket.style.transform = "scale(2)";
        
        setTimeout(() => {
            rocket.style.display = "none";
        }, 600);

        stopGame("lose");
        multDisplay.classList.add("boom");
        multDisplay.textContent = "BOOM! " + currentMultiplier.toFixed(2) + "x";
    }

    function stopGame(result) {
        isFlying = false;
        clearInterval(gameInterval);
        mainBtn.textContent = "–°–¢–ê–í–ö–ê";
        mainBtn.className = "main-btn btn-start";
        addHistory(currentMultiplier.toFixed(2), result);
        updateCoins();
    }

    function updateCoins() {
        localStorage.setItem("coins", coins);
        document.getElementById("coins").textContent = Math.floor(coins).toLocaleString();
    }

    function addHistory(val, res) {
        const hist = document.getElementById("history");
        const item = document.createElement("div");
        item.className = "history-item";
        item.style.borderLeft = `3px solid ${res === "win" ? "var(--neon-green)" : "var(--neon-red)"}`;
        item.textContent = val + "x";
        hist.prepend(item);
        if (hist.children.length > 15) hist.lastChild.remove();
    }
</script>
</body>
</html>
