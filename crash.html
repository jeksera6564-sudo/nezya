<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEON CRASH ‚Äî VIP FLIGHT</title>
    <style>
        :root {
            --neon-green: #39ff14;
            --neon-red: #ff3131;
            --neon-blue: #00d2ff;
            --neon-purple: #bc13fe;
            --bg: #050505;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        
        body {
            background: var(--bg); color: white; height: 100vh;
            display: flex; flex-direction: column; align-items: center; overflow: hidden;
        }

        /* –≠–∫—Ä–∞–Ω –≥—Ä–∞—Ñ–∏–∫–∞ */
        .crash-canvas {
            width: 90%; height: 45vh; margin-top: 60px;
            border: 2px solid rgba(0, 210, 255, 0.2);
            border-radius: 20px; position: relative;
            background: radial-gradient(circle at bottom left, rgba(0, 210, 255, 0.1), transparent);
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; box-shadow: inset 0 0 50px rgba(0, 210, 255, 0.05);
        }

        #rocket {
            position: absolute; bottom: 10%; left: 10%;
            font-size: 50px; z-index: 5;
            transition: transform 0.1s linear; display: none;
            filter: drop-shadow(0 0 15px var(--neon-blue));
        }

        #multiplier {
            font-size: 80px; font-weight: 900; z-index: 10;
            text-shadow: 0 0 30px var(--neon-blue); transition: 0.1s;
            pointer-events: none;
        }

        /* –ú–∞–≥–∞–∑–∏–Ω –ë—É—Å—Ç–æ–≤ */
        .shop-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 100;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            backdrop-filter: blur(10px);
        }
        .shop-card {
            background: #111; border: 2px solid var(--neon-purple);
            padding: 30px; border-radius: 20px; width: 85%; max-width: 400px;
            text-align: center;
        }
        .boost-item {
            background: rgba(255,255,255,0.05); border: 1px solid #333;
            padding: 15px; border-radius: 12px; margin: 10px 0;
            display: flex; justify-content: space-between; align-items: center;
            transition: 0.3s;
        }
        .boost-item.active { border-color: var(--neon-green); background: rgba(57, 255, 20, 0.1); }
        .boost-btn {
            background: var(--neon-purple); border: none; padding: 8px 12px;
            border-radius: 8px; color: white; font-weight: bold; cursor: pointer;
        }

        /* –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —à–æ–ø–∞ */
        .open-shop {
            position: absolute; right: 20px; top: 20px;
            background: var(--neon-purple); border: none; padding: 10px;
            border-radius: 10px; color: white; cursor: pointer; font-size: 14px;
        }

        .explosion { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
        }

        .stats { position: absolute; top: 20px; left: 20px; display: flex; flex-direction: column; gap: 5px; }
        .stat-box { background: rgba(0,0,0,0.6); padding: 8px 15px; border-radius: 10px; border: 1px solid var(--neon-blue); font-size: 14px; }

        .controls { width: 100%; padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .bet-input { background: #111; border: 2px solid var(--neon-blue); color: white; padding: 12px; border-radius: 10px; width: 180px; text-align: center; font-size: 20px; outline: none; }
        
        .main-btn { width: 250px; padding: 18px; border-radius: 50px; border: none; font-size: 22px; font-weight: 900; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .btn-start { background: var(--neon-blue); box-shadow: 0 0 20px var(--neon-blue); }
        .btn-cashout { background: var(--neon-green); box-shadow: 0 0 20px var(--neon-green); }
        
        .history { display: flex; gap: 8px; margin-top: 15px; overflow-x: auto; width: 90%; padding: 10px; scrollbar-width: none; }
        .history-item { padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: bold; background: rgba(255,255,255,0.05); flex-shrink: 0; }
        .boom { color: var(--neon-red) !important; text-shadow: 0 0 30px var(--neon-red) !important; }
        
        .active-boosts-bar { display: flex; gap: 10px; margin-top: 5px; }
        .mini-badge { font-size: 10px; padding: 2px 6px; border-radius: 4px; background: #333; }
    </style>
</head>
<body>

    <button class="open-shop" onclick="toggleShop(true)">üõí –ë–£–°–¢–´</button>

    <div class="stats">
        <div class="stat-box">ü™ô <span id="coins">0</span></div>
        <div class="stat-box" style="border-color: var(--neon-purple);">üíé <span id="crys">0</span></div>
        <div class="active-boosts-bar" id="activeBoosts"></div>
    </div>

    <div class="shop-overlay" id="shop">
        <div class="shop-card">
            <h2 style="color: var(--neon-purple); margin-bottom: 20px;">UPGRADES</h2>
            
            <div class="boost-item" id="item-shield">
                <div style="text-align: left;">
                    <b>üõ°Ô∏è –°—Ç—Ä–∞—Ö–æ–≤–∫–∞</b><br><small>–í–µ—Ä–Ω–µ—Ç 50% –ø—Ä–∏ –≤–∑—Ä—ã–≤–µ</small>
                </div>
                <button class="boost-btn" onclick="buyBoost('shield', 500)">500 üíé</button>
            </div>

            <div class="boost-item" id="item-fast">
                <div style="text-align: left;">
                    <b>üöÄ –§–æ—Ä—Å–∞–∂</b><br><small>–†–æ—Å—Ç x2 –±—ã—Å—Ç—Ä–µ–µ</small>
                </div>
                <button class="boost-btn" onclick="buyBoost('fast', 1000)">1000 üíé</button>
            </div>

            <button class="main-btn btn-start" style="width: 100%; margin-top: 20px; font-size: 16px;" onclick="toggleShop(false)">–ó–ê–ö–†–´–¢–¨</button>
        </div>
    </div>

    <div class="crash-canvas" id="canvas">
        <div id="rocket">üöÄ</div>
        <div id="multiplier">1.00x</div>
    </div>

    <div class="history" id="history"></div>

    <div class="controls">
        <input type="number" id="betAmount" class="bet-input" value="1000" step="1000">
        <button id="mainBtn" class="main-btn btn-start" onclick="action()">–°–¢–ê–í–ö–ê</button>
        <a href="index.html" style="color: #555; text-decoration: none; font-size: 14px;">–í–ï–†–ù–£–¢–¨–°–Ø</a>
    </div>

<script>
    let state = {
        coins: +localStorage.getItem("coins") || 0,
        crys: +localStorage.getItem("crystals") || 0,
        boosts: { shield: false, fast: false }
    };

    let currentMultiplier = 1.0;
    let isFlying = false;
    let gameInterval;
    let crashPoint;

    const rocket = document.getElementById("rocket");
    const multDisplay = document.getElementById("multiplier");
    const mainBtn = document.getElementById("mainBtn");

    function updateUI() {
        document.getElementById("coins").textContent = Math.floor(state.coins).toLocaleString();
        document.getElementById("crys").textContent = state.crys.toLocaleString();
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–∞—à–µ–∫ –±—É—Å—Ç–æ–≤
        const bar = document.getElementById("activeBoosts");
        bar.innerHTML = "";
        if(state.boosts.shield) bar.innerHTML += `<span class="mini-badge" style="color:var(--neon-green)">üõ°Ô∏è SHIELD</span>`;
        if(state.boosts.fast) bar.innerHTML += `<span class="mini-badge" style="color:var(--neon-blue)">üöÄ FAST</span>`;
    }

    function toggleShop(show) {
        document.getElementById("shop").style.display = show ? "flex" : "none";
    }

    function buyBoost(type, price) {
        if (state.crys < price) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤!");
        if (state.boosts[type]) return alert("–£–∂–µ –∞–∫—Ç–∏–≤–Ω–æ!");
        
        state.crys -= price;
        state.boosts[type] = true;
        localStorage.setItem("crystals", state.crys);
        document.getElementById(`item-${type}`).classList.add('active');
        updateUI();
    }

    function action() {
        if (!isFlying) startRound();
        else cashOut();
    }

    function startRound() {
        const bet = +document.getElementById("betAmount").value;
        if (bet > state.coins || bet <= 0) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");

        state.coins -= bet;
        saveCoins();

        isFlying = true;
        currentMultiplier = 1.0;
        mainBtn.textContent = "–ó–ê–ë–†–ê–¢–¨";
        mainBtn.className = "main-btn btn-cashout";
        multDisplay.classList.remove("boom");
        document.getElementById("canvas").classList.remove("explosion");
        
        rocket.style.display = "block";
        rocket.style.transition = "none";
        
        crashPoint = generateCrashPoint();

        gameInterval = setInterval(() => {
            // –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω —Ñ–æ—Ä—Å–∞–∂, —Ä–∞—Å—Ç–µ—Ç –±—ã—Å—Ç—Ä–µ–µ
            let step = state.boosts.fast ? 0.03 : 0.015;
            currentMultiplier += step * (currentMultiplier / 1.5);
            
            multDisplay.textContent = currentMultiplier.toFixed(2) + "x";

            // –î–≤–∏–∂–µ–Ω–∏–µ —Ä–∞–∫–µ—Ç—ã "–ø–ª–∞–≤–∞—é—â–µ–µ" (–≤–≤–µ—Ä—Ö-–≤–Ω–∏–∑ –Ω–µ–º–Ω–æ–≥–æ)
            let floatEffect = Math.sin(Date.now() / 200) * 2;
            let moveX = Math.min(10 + (currentMultiplier * 5), 80);
            let moveY = Math.min(10 + (currentMultiplier * 7), 75) + floatEffect;
            
            rocket.style.left = moveX + "%";
            rocket.style.bottom = moveY + "%";
            rocket.style.transform = `rotate(${45 + floatEffect}deg)`;

            if (currentMultiplier >= crashPoint) gameOver(bet);
        }, 80);
    }

    function generateCrashPoint() {
        const r = Math.random();
        if (r < 0.1) return 1.1; 
        return Math.max(1.1, (1 / (1 - Math.random())).toFixed(2));
    }

    function cashOut() {
        if (!isFlying) return;
        const bet = +document.getElementById("betAmount").value;
        const win = Math.floor(bet * currentMultiplier);
        state.coins += win;
        
        rocket.style.transition = "all 0.8s ease-in";
        rocket.style.left = "130%";
        rocket.style.bottom = "130%";
        
        stopGame("win");
        setTimeout(() => rocket.style.display = "none", 800);
    }

    function gameOver(bet) {
        document.getElementById("canvas").classList.add("explosion");
        rocket.textContent = "üí•";
        
        // –õ–æ–≥–∏–∫–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏
        if (state.boosts.shield) {
            const refund = Math.floor(bet * 0.5);
            state.coins += refund;
            alert(`üõ°Ô∏è –°—Ç—Ä–∞—Ö–æ–≤–∫–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞! –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ ${refund} ü™ô`);
        }

        setTimeout(() => {
            rocket.style.display = "none";
            rocket.textContent = "üöÄ";
        }, 600);

        stopGame("lose");
        multDisplay.classList.add("boom");
        multDisplay.textContent = "BOOM! " + currentMultiplier.toFixed(2) + "x";
    }

    function stopGame(result) {
        isFlying = false;
        clearInterval(gameInterval);
        mainBtn.textContent = "–°–¢–ê–í–ö–ê";
        mainBtn.className = "main-btn btn-start";
        
        // –°–±—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—É—Å—Ç–æ–≤ –ø–æ—Å–ª–µ —Ä–∞—É–Ω–¥–∞
        state.boosts.shield = false;
        state.boosts.fast = false;
        document.querySelectorAll('.boost-item').forEach(el => el.classList.remove('active'));
        
        addHistory(currentMultiplier.toFixed(2), result);
        saveCoins();
    }

    function saveCoins() {
        localStorage.setItem("coins", state.coins);
        updateUI();
    }

    function addHistory(val, res) {
        const hist = document.getElementById("history");
        const item = document.createElement("div");
        item.className = "history-item";
        item.style.color = res === "win" ? "var(--neon-green)" : "var(--neon-red)";
        item.textContent = val + "x";
        hist.prepend(item);
        if (hist.children.length > 15) hist.lastChild.remove();
    }

    updateUI();
</script>
</body>
</html>
