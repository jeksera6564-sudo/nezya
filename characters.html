<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</title>
    <style>
        body { 
            background: url('assets/characters-bg.jpg') center/cover no-repeat fixed; 
            color: white; font-family: sans-serif; padding: 20px; margin: 0;
        }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.75); z-index: -1; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; max-width: 900px; margin: 0 auto; }
        .card { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 25px; text-align: center; border: 2px solid transparent; transition: 0.3s; }
        .card.active { border-color: #22c55e; background: rgba(34, 197, 94, 0.2); }
        img { width: 140px; height: 140px; object-fit: contain; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5)); }
        button { width: 100%; padding: 12px; margin-top: 15px; border-radius: 15px; border: none; background: #ffd700; font-weight: bold; cursor: pointer; }
        button:disabled { background: #444; color: #888; }
        .back { display: block; text-align: center; margin: 40px auto; color: white; text-decoration: none; font-weight: bold; background: #ffd700; color: black; width: fit-content; padding: 12px 40px; border-radius: 25px; }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <h1 style="text-align:center; margin-bottom:30px; text-transform: uppercase;">–í—ã–±–µ—Ä–∏—Ç–µ –ì–µ—Ä–æ—è</h1>
    <div class="grid" id="heroList"></div>

    <script>
        let state = {
            active: localStorage.getItem("activeCharacter") || "default",
            owned: JSON.parse(localStorage.getItem("characters")) || { default: true },
            coins: +localStorage.getItem("coins") || 0
        };

        const heroes = [
            { id: "default", name: "–ù–æ–≤–∏—á–æ–∫", price: 0, img: "assets/character_default.png" },
            { id: "clicker", name: "–ü—Ä–æ-–ö–ª–∏–∫–µ—Ä", price: 5000, img: "assets/character_clicker.png" },
            { id: "business", name: "–ë–∏–∑–Ω–µ—Å–º–µ–Ω", price: 25000, img: "assets/character_business.png" },
            { id: "magnate", name: "–ú–∞–≥–Ω–∞—Ç", price: 100000, img: "assets/character_magnate.png" },
            { id: "legendary", name: "–õ–µ–≥–µ–Ω–¥–∞", price: 500000, img: "assets/character_legendary.png" }
        ];

        function render() {
            const container = document.getElementById("heroList");
            container.innerHTML = "";
            heroes.forEach(h => {
                let isOwned = state.owned[h.id];
                let isActive = state.active === h.id;
                container.innerHTML += `
                    <div class="card ${isActive ? 'active' : ''}">
                        <img src="${h.img}">
                        <h3>${h.name}</h3>
                        <p>${isOwned ? '–í –∫–æ–ª–ª–µ–∫—Ü–∏–∏' : h.price.toLocaleString() + ' ü™ô'}</p>
                        <button ${isActive ? 'disabled' : ''} onclick="handle('${h.id}', ${h.price})">
                            ${isActive ? '–í–´–ë–†–ê–ù' : (isOwned ? '–í–´–ë–†–ê–¢–¨' : '–ö–£–ü–ò–¢–¨')}
                        </button>
                    </div>`;
            });
        }

        window.handle = (id, price) => {
            if (state.owned[id]) {
                state.active = id;
            } else if (state.coins >= price) {
                state.coins -= price;
                state.owned[id] = true;
                state.active = id;
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
                return;
            }
            localStorage.setItem("coins", state.coins);
            localStorage.setItem("characters", JSON.stringify(state.owned));
            localStorage.setItem("activeCharacter", state.active);
            render();
        }
        render();
    </script>
    <a href="index.html" class="back">‚¨Ö –ù–ê–ó–ê–î –í –ò–ì–†–£</a>
</body>
</html>
