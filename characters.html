<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ—Ä–æ–∏</title>
    <style>
        body { background: #111; color: white; font-family: sans-serif; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }
        .card { background: #222; padding: 15px; border-radius: 20px; text-align: center; border: 2px solid transparent; }
        .active { border-color: #22c55e; box-shadow: 0 0 10px #22c55e; }
        img { width: 100px; height: 100px; object-fit: contain; }
        button { width: 100%; padding: 10px; margin-top: 10px; border-radius: 10px; border: none; background: #fbbf24; font-weight: bold; }
        .back { display: block; text-align: center; margin-top: 30px; color: gold; text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>
    <h2 style="text-align:center; margin-bottom:20px;">–í–´–ë–ï–†–ò –ì–ï–†–û–Ø</h2>
    <div class="grid" id="heroList"></div>

    <script>
        let state = {
            active: localStorage.getItem("activeCharacter") || "default",
            owned: JSON.parse(localStorage.getItem("characters")) || { default: true },
            coins: +localStorage.getItem("coins") || 0
        };

        const heroes = [
            { id: "default", name: "–ù–æ–≤–∏—á–æ–∫", price: 0 },
            { id: "clicker", name: "–ö–ª–∏–∫–µ—Ä", price: 5000 },
            { id: "business", name: "–ë–∏–∑–Ω–µ—Å–º–µ–Ω", price: 25000 }
        ];

        function render() {
            const container = document.getElementById("heroList");
            container.innerHTML = "";
            heroes.forEach(h => {
                let isOwned = state.owned[h.id];
                let isActive = state.active === h.id;
                container.innerHTML += `
                    <div class="card ${isActive ? 'active' : ''}">
                        <img src="assets/${h.id}.png" onerror="this.src='https://via.placeholder.com/100'">
                        <h3>${h.name}</h3>
                        <p>${isOwned ? '–ö—É–ø–ª–µ–Ω–æ' : h.price + ' ü™ô'}</p>
                        <button ${isActive ? 'disabled' : ''} onclick="handle('${h.id}', ${h.price})">
                            ${isActive ? '–í–´–ë–†–ê–ù' : (isOwned ? '–í–´–ë–†–ê–¢–¨' : '–ö–£–ü–ò–¢–¨')}
                        </button>
                    </div>`;
            });
        }

        window.handle = (id, price) => {
            if (state.owned[id]) {
                state.active = id;
            } else if (state.coins >= price) {
                state.coins -= price;
                state.owned[id] = true;
                state.active = id;
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
                return;
            }
            localStorage.setItem("coins", state.coins);
            localStorage.setItem("characters", JSON.stringify(state.owned));
            localStorage.setItem("activeCharacter", state.active);
            render();
        }
        render();
    </script>
    <a href="index.html" class="back">‚¨Ö –ù–ê–ó–ê–î –í –ò–ì–†–£</a>
</body>
</html>
