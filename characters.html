<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ ‚Äî Nezya Clicker</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            background: url('assets/characters-bg.jpg') center/cover no-repeat fixed; 
            color: white; font-family: 'Segoe UI', sans-serif; padding: 20px;
        }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: -1; }
        
        h1 { text-align: center; margin-bottom: 30px; text-transform: uppercase; letter-spacing: 3px; color: #ffd700; text-shadow: 0 0 10px rgba(255,214,0,0.5); }

        .grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); 
            gap: 15px; max-width: 900px; margin: 0 auto; 
        }

        .card { 
            background: rgba(255,255,255,0.07); 
            padding: 20px; border-radius: 25px; 
            text-align: center; border: 2px solid rgba(255,215,0,0.1); 
            transition: 0.3s; backdrop-filter: blur(10px);
            display: flex; flex-direction: column; align-items: center;
        }
        .card.active { 
            border-color: #ffd700; 
            background: rgba(255, 215, 0, 0.15); 
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        .card img { width: 120px; height: 120px; object-fit: contain; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5)); margin-bottom: 15px; }
        .card h3 { font-size: 18px; margin-bottom: 5px; color: #fff; }
        .card .stats { font-size: 12px; color: #4ade80; margin-bottom: 10px; font-weight: bold; }
        .card .price { font-size: 14px; color: #ffd700; margin-bottom: 15px; }

        button { 
            width: 100%; padding: 12px; border-radius: 15px; border: none; 
            background: #ffd700; color: #000; font-weight: 900; 
            cursor: pointer; transition: 0.2s; text-transform: uppercase; font-size: 12px;
        }
        button:active { transform: scale(0.95); }
        button:disabled { background: #333; color: #777; cursor: default; }

        .back-btn { 
            display: block; text-align: center; margin: 40px auto; 
            color: #000; text-decoration: none; font-weight: 900; 
            background: #ffd700; width: fit-content; padding: 15px 50px; 
            border-radius: 30px; box-shadow: 0 5px 15px rgba(255,215,0,0.3);
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <h1>–í–∞—à–∏ –ì–µ—Ä–æ–∏</h1>
    
    <div class="grid" id="heroList"></div>

    <a href="index.html" class="back-btn">‚¨Ö –í –ë–û–ô</a>

    <script>
        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–µ—Ä–æ–µ–≤
        const heroes = [
            { id: "default", name: "–ù–æ–≤–∏—á–æ–∫", price: 0, pwr: 1, cry: 0, img: "assets/character_default.png" },
            { id: "clicker", name: "–ü—Ä–æ-–ö–ª–∏–∫–µ—Ä", price: 5000, pwr: 5, cry: 0, img: "assets/character_clicker.png" },
            { id: "business", name: "–ë–∏–∑–Ω–µ—Å–º–µ–Ω", price: 25000, pwr: 20, cry: 1, img: "assets/character_business.png" },
            { id: "magnate", name: "–ú–∞–≥–Ω–∞—Ç", price: 100000, pwr: 100, cry: 3, img: "assets/character_magnate.png" },
            { id: "legendary", name: "–õ–µ–≥–µ–Ω–¥–∞", price: 500000, pwr: 500, cry: 10, img: "assets/character_legendary.png" }
        ];

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let state = {
            active: localStorage.getItem("activeCharacter") || "clicker", // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—Ç–∞–≤–∏–º –≤—Ç–æ—Ä–æ–≥–æ
            owned: JSON.parse(localStorage.getItem("characters")) || { default: true, clicker: true }, // –í—Ç–æ—Ä–æ–π —Ç–æ–∂–µ —Å—Ä–∞–∑—É –∫—É–ø–ª–µ–Ω
            coins: +localStorage.getItem("coins") || 0
        };

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä, –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
        if (!localStorage.getItem("activeCharacter")) {
            localStorage.setItem("activeCharacter", "clicker");
            localStorage.setItem("characters", JSON.stringify(state.owned));
        }

        function render() {
            const container = document.getElementById("heroList");
            container.innerHTML = "";

            heroes.forEach(h => {
                const isOwned = state.owned[h.id];
                const isActive = state.active === h.id;
                
                container.innerHTML += `
                    <div class="card ${isActive ? 'active' : ''}">
                        <img src="${h.img}">
                        <h3>${h.name}</h3>
                        <div class="stats">–£—Ä–æ–Ω: +${h.pwr} ${h.cry > 0 ? ' | üíé: +' + h.cry : ''}</div>
                        <p class="price">${isOwned ? '–í –∫–æ–ª–ª–µ–∫—Ü–∏–∏' : h.price.toLocaleString() + ' ü™ô'}</p>
                        <button ${isActive ? 'disabled' : ''} onclick="handleAction('${h.id}', ${h.price})">
                            ${isActive ? '–í–´–ë–†–ê–ù' : (isOwned ? '–í–´–ë–†–ê–¢–¨' : '–ö–£–ü–ò–¢–¨')}
                        </button>
                    </div>`;
            });
        }

        window.handleAction = (id, price) => {
            if (state.owned[id]) {
                // –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞–µ–º
                state.active = id;
            } else if (state.coins >= price) {
                // –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø–æ–∫—É–ø–∞–µ–º
                state.coins -= price;
                state.owned[id] = true;
                state.active = id;
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —ç—Ç–æ–≥–æ –≥–µ—Ä–æ—è! ü™ô");
                return;
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            localStorage.setItem("coins", state.coins);
            localStorage.setItem("characters", JSON.stringify(state.owned));
            localStorage.setItem("activeCharacter", state.active);
            
            render();
        };

        render();
    </script>
</body>
</html>
