<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VIP Wheel ‚Äî Nezya Edition</title>
    <style>
        :root {
            --gold: #ffd700;
            --neon-blue: #00d2ff;
            --neon-purple: #9d00ff;
            --neon-pink: #ff007f;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            width: 100vw; height: 100vh; 
            background: radial-gradient(circle at center, #1a1a2e 0%, #020205 100%);
            font-family: 'Segoe UI', sans-serif; overflow: hidden; color: white;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: background 0.5s;
        }

        .balance-top { position: absolute; top: 20px; display: flex; gap: 15px; z-index: 20; }
        .bal { 
            background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 20px; 
            border: 2px solid var(--gold); font-weight: 900; min-width: 110px; 
            text-align: center; box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∫–æ–ª–µ—Å */
        .mode-switch {
            margin-bottom: 20px;
            background: rgba(255,255,255,0.05);
            padding: 5px; border-radius: 30px;
            border: 1px solid rgba(255,255,255,0.1);
            display: flex; gap: 5px; z-index: 30;
        }
        .mode-btn {
            padding: 10px 20px; border-radius: 25px; border: none;
            cursor: pointer; font-weight: 900; font-size: 12px;
            transition: 0.3s; background: transparent; color: #777;
        }
        .mode-btn.active { background: var(--gold); color: #000; box-shadow: 0 0 15px var(--gold); }
        .mode-btn.active.vip { background: var(--neon-purple); color: #fff; box-shadow: 0 0 15px var(--neon-purple); }

        .wheel-container { 
            position: relative; width: 340px; height: 340px; margin-bottom: 20px; 
            transition: 0.5s;
        }

        .wheel {
            width: 100%; height: 100%; border-radius: 50%; 
            border: 8px solid var(--gold);
            transition: transform 5s cubic-bezier(0.15, 0, 0.15, 1), border 0.5s;
            position: relative; overflow: hidden;
            box-shadow: 0 0 50px rgba(0, 0, 0, 1);
        }

        .segment {
            position: absolute; width: 50%; height: 50%;
            left: 50%; top: 50%; transform-origin: 0% 0%;
            display: flex; align-items: center; justify-content: flex-start;
            padding-left: 50px; font-weight: 900; font-size: 13px;
            text-shadow: 0 0 10px rgba(0,0,0,1); pointer-events: none;
        }

        .pointer {
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent;
            border-top: 45px solid var(--gold); z-index: 50; filter: drop-shadow(0 0 10px var(--gold));
            transition: border-top-color 0.5s;
        }

        .center-cap {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 60px; height: 60px; background: var(--gold); border: 4px solid #fff;
            border-radius: 50%; z-index: 60; box-shadow: 0 0 30px var(--gold);
            display: flex; align-items: center; justify-content: center; font-size: 24px;
            transition: 0.5s;
        }

        .spin-btn {
            background: linear-gradient(45deg, var(--gold), #ff7f50);
            color: #000; border: none; padding: 18px 60px;
            border-radius: 50px; font-weight: 900; font-size: 22px; cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            transition: 0.3s; text-transform: uppercase;
        }

        .spin-btn:disabled { opacity: 0.5; transform: scale(0.95); }

        .jackpot-alert {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95); border: 3px solid var(--gold);
            padding: 40px; border-radius: 30px; text-align: center;
            z-index: 100; display: none;
        }
    </style>
</head>
<body>

    <div class="jackpot-alert" id="jackpotBox">
        <h1 style="color: var(--gold); margin-bottom: 10px;">üèÜ JACKPOT!</h1>
        <p style="font-size: 20px;">–í—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –≥–µ—Ä–æ—è:<br><b style="color: #ff4d4d;">–ú–ê–ì–ù–ê–¢</b></p>
        <button class="spin-btn" style="margin-top: 20px;" onclick="closeJackpot()">–£–†–ê!</button>
    </div>

    <div class="balance-top">
        <div class="bal">ü™ô <span id="coins">0</span></div>
        <div class="bal">üíé <span id="crystals">0</span></div>
    </div>

    <div class="mode-switch">
        <button id="btnCoinMode" class="mode-btn active" onclick="setMode('coin')">–ó–û–õ–û–¢–û–ï –ö–û–õ–ï–°–û</button>
        <button id="btnVipMode" class="mode-btn vip" onclick="setMode('vip')">–ê–õ–ú–ê–ó–ù–û–ï –ö–û–õ–ï–°–û</button>
    </div>

    <div class="wheel-container" id="wCont">
        <div class="pointer" id="pointer"></div>
        <div class="center-cap" id="cap">ü™ô</div>
        <div class="wheel" id="wheel"></div>
    </div>

    <div class="controls">
        <button id="spinBtn" class="spin-btn" onclick="spin()">–ö–†–£–¢–ò–¢–¨</button>
        <div id="timer" style="margin-top: 15px; color: var(--gold); font-weight: bold; text-align: center;">...</div>
        <a href="index.html" style="margin-top: 20px; color: #666; display: block; text-decoration: none; font-size: 13px; text-align: center;">–ù–ê–ó–ê–î</a>
    </div>

<script>
    let currentMode = 'coin'; // 'coin' –∏–ª–∏ 'vip'
    let state = {
        coins: +localStorage.getItem("coins") || 0,
        crystals: +localStorage.getItem("crystals") || 0,
        lastSpin: +localStorage.getItem("lastSpinTime") || 0,
        ownedHeroes: JSON.parse(localStorage.getItem("characters")) || { default: true }
    };

    const wheelData = {
        coin: {
            cost: 50000,
            currency: 'coin',
            color1: '#ffa502', color2: '#121212',
            cap: 'ü™ô',
            prizes: [
                { n: "ü™ô 100k", t: "coin", v: 100000 }, { n: "üíé 5", t: "cry", v: 5 },
                { n: "ü™ô 50k", t: "coin", v: 50000 },  { n: "üíé 1", t: "cry", v: 1 },
                { n: "ü™ô 200k", t: "coin", v: 200000 }, { n: "ü™ô 10k", t: "coin", v: 10000 },
                { n: "üíé 10", t: "cry", v: 10 },    { n: "ü™ô 5k", t: "coin", v: 5000 }
            ]
        },
        vip: {
            cost: 100,
            currency: 'cry',
            color1: '#9d00ff', color2: '#121212',
            cap: 'üíé',
            prizes: [
                { n: "üíé 500", t: "cry", v: 500 }, { n: "ü™ô 10k", t: "coin", v: 10000 },
                { n: "üíé 10", t: "cry", v: 10 },   { n: "ü™ô 5k", t: "coin", v: 5000 },
                { n: "üíé 200", t: "cry", v: 200 }, { n: "ü™ô 1k", t: "coin", v: 1000 },
                { n: "üíé 50", t: "cry", v: 50 },   { n: "ü™ô 500", t: "coin", v: 500 }
            ]
        }
    };

    function setMode(mode) {
        if (isSpinning) return;
        currentMode = mode;
        const data = wheelData[mode];
        
        // –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
        document.getElementById("btnCoinMode").classList.toggle("active", mode === 'coin');
        document.getElementById("btnVipMode").classList.toggle("active", mode === 'vip');
        
        const wheel = document.getElementById("wheel");
        wheel.innerHTML = "";
        wheel.style.borderColor = mode === 'coin' ? 'var(--gold)' : 'var(--neon-purple)';
        document.getElementById("pointer").style.borderTopColor = mode === 'coin' ? 'var(--gold)' : 'var(--neon-purple)';
        document.getElementById("cap").style.background = mode === 'coin' ? 'var(--gold)' : 'var(--neon-purple)';
        document.getElementById("cap").textContent = data.cap;
        
        wheel.style.background = `conic-gradient(
            ${data.color1} 0deg 45deg, ${data.color2} 45deg 90deg, 
            ${data.color1} 90deg 135deg, ${data.color2} 135deg 180deg,
            ${data.color1} 180deg 225deg, ${data.color2} 225deg 270deg, 
            ${data.color1} 270deg 315deg, ${data.color2} 315deg 360deg
        )`;

        data.prizes.forEach((p, i) => {
            const div = document.createElement("div");
            div.className = "segment";
            div.style.transform = `rotate(${i * 45 + 22.5}deg) rotate(-90deg)`;
            div.innerHTML = p.n;
            wheel.appendChild(div);
        });

        updateUI();
    }

    function updateUI() {
        document.getElementById("coins").textContent = Math.floor(state.coins).toLocaleString();
        document.getElementById("crystals").textContent = state.crystals;
        
        const data = wheelData[currentMode];
        const spinBtn = document.getElementById("spinBtn");
        
        if (currentMode === 'vip') {
            const diff = Date.now() - state.lastSpin;
            const day = 86400000;
            if (diff < day) {
                spinBtn.textContent = `–ó–ê ${data.cost} üíé`;
                const timeLeft = day - diff;
                document.getElementById("timer").textContent = `–ë–µ—Å–ø–ª–∞—Ç–Ω–æ —á–µ—Ä–µ–∑: ${Math.floor(timeLeft/3600000)}—á`;
            } else {
                spinBtn.textContent = "–ë–ï–°–ü–õ–ê–¢–ù–û";
                document.getElementById("timer").textContent = "VIP –ë–æ–Ω—É—Å –≥–æ—Ç–æ–≤!";
            }
        } else {
            spinBtn.textContent = `–ó–ê ${data.cost.toLocaleString()} ü™ô`;
            document.getElementById("timer").textContent = "–ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É!";
        }
    }

    let isSpinning = false;
    function spin() {
        if (isSpinning) return;
        const data = wheelData[currentMode];
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–Ω—ã
        if (currentMode === 'vip') {
            const isFree = (Date.now() - state.lastSpin) >= 86400000;
            if (!isFree) {
                if (state.crystals < data.cost) return alert("–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤!");
                state.crystals -= data.cost;
            } else {
                state.lastSpin = Date.now();
                localStorage.setItem("lastSpinTime", state.lastSpin);
            }
        } else {
            if (state.coins < data.cost) return alert("–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –º–æ–Ω–µ—Ç!");
            state.coins -= data.cost;
        }

        isSpinning = true;
        document.getElementById("spinBtn").disabled = true;

        const targetSector = Math.floor(Math.random() * 8);
        const magnatChance = Math.random() < 0.0004;
        const totalRot = 3600 + (360 - (targetSector * 45));
        
        const wheel = document.getElementById("wheel");
        wheel.style.transform = `rotate(${totalRot}deg)`;

        setTimeout(() => {
            isSpinning = false;
            document.getElementById("spinBtn").disabled = false;
            
            if (magnatChance && !state.ownedHeroes["magnate"]) {
                state.ownedHeroes["magnate"] = true;
                localStorage.setItem("characters", JSON.stringify(state.ownedHeroes));
                document.getElementById("jackpotBox").style.display = "block";
            }

            const prize = data.prizes[targetSector];
            if (prize.t === "coin") state.coins += prize.v;
            else state.crystals += prize.v;

            localStorage.setItem("coins", state.coins);
            localStorage.setItem("crystals", state.crystals);
            updateUI();
            
            wheel.style.transition = "none";
            wheel.style.transform = `rotate(${totalRot % 360}deg)`;
            setTimeout(() => wheel.style.transition = "transform 5s cubic-bezier(0.15, 0, 0.15, 1)", 50);
        }, 5100);
    }

    function closeJackpot() { document.getElementById("jackpotBox").style.display = "none"; }
    setMode('coin'); // –ù–∞—á–∏–Ω–∞–µ–º —Å –æ–±—ã—á–Ω–æ–≥–æ
</script>
</body>
</html>
