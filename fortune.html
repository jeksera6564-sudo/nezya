<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VIP Wheel ‚Äî Nezya Edition</title>
    <style>
        :root {
            --gold: #ffd700;
            --neon-blue: #00d2ff;
            --neon-purple: #9d00ff;
            --neon-pink: #ff007f;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            width: 100vw; height: 100vh; 
            background: radial-gradient(circle at center, #1a1a2e 0%, #020205 100%);
            font-family: 'Segoe UI', sans-serif; overflow: hidden; color: white;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* –ë–∞–ª–∞–Ω—Å —Å –Ω–µ–æ–Ω–æ–º */
        .balance-top { position: absolute; top: 20px; display: flex; gap: 15px; z-index: 20; }
        .bal { 
            background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 20px; 
            border: 2px solid var(--gold); font-weight: 900; min-width: 110px; 
            text-align: center; box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–ª–µ—Å–∞ */
        .wheel-container { 
            position: relative; width: 360px; height: 360px; margin-bottom: 30px; 
            filter: drop-shadow(0 0 30px rgba(157, 0, 255, 0.2));
        }

        .wheel {
            width: 100%; height: 100%; border-radius: 50%; 
            border: 8px solid var(--gold);
            background: conic-gradient(
                #ff4757 0deg 45deg, #121212 45deg 90deg, 
                #ffa502 90deg 135deg, #121212 135deg 180deg,
                #1e90ff 180deg 225deg, #121212 225deg 270deg, 
                #9d00ff 270deg 315deg, #121212 315deg 360deg
            );
            transition: transform 5s cubic-bezier(0.15, 0, 0.15, 1);
            position: relative; overflow: hidden;
            box-shadow: 0 0 50px rgba(0, 0, 0, 1), inset 0 0 50px rgba(255,215,0,0.2);
        }

        /* –ú–µ—Ä—Ü–∞—é—â–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã */
        .segment {
            position: absolute; width: 50%; height: 50%;
            left: 50%; top: 50%; transform-origin: 0% 0%;
            display: flex; align-items: center; justify-content: flex-start;
            padding-left: 60px; font-weight: 900; font-size: 14px;
            text-shadow: 0 0 10px rgba(0,0,0,1); pointer-events: none;
        }

        .pointer {
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent;
            border-top: 45px solid var(--gold); z-index: 50; filter: drop-shadow(0 0 10px var(--gold));
        }

        .center-cap {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 60px; height: 60px; background: var(--gold); border: 4px solid #fff;
            border-radius: 50%; z-index: 60; box-shadow: 0 0 30px var(--gold);
            display: flex; align-items: center; justify-content: center; font-size: 24px;
        }

        /* –ö–Ω–æ–ø–∫–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π */
        .spin-btn {
            background: linear-gradient(45deg, var(--gold), #ff7f50);
            color: #000; border: none; padding: 20px 70px;
            border-radius: 50px; font-weight: 900; font-size: 24px; cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            transition: 0.3s; text-transform: uppercase;
            animation: buttonGlow 2s infinite ease-in-out;
        }

        @keyframes buttonGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.4); transform: scale(1); }
            50% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.7); transform: scale(1.05); }
        }

        .spin-btn:disabled { background: #333; color: #666; animation: none; }

        .jackpot-alert {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9); border: 3px solid var(--gold);
            padding: 40px; border-radius: 30px; text-align: center;
            z-index: 100; display: none; animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes pop { from { transform: translate(-50%, -50%) scale(0); } to { transform: translate(-50%, -50%) scale(1); } }
    </style>
</head>
<body>

    <div class="jackpot-alert" id="jackpotBox">
        <h1 style="color: var(--gold); margin-bottom: 10px;">üèÜ JACKPOT!</h1>
        <p style="font-size: 20px;">–í—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –≥–µ—Ä–æ—è:<br><b style="color: #ff4d4d;">–ú–ê–ì–ù–ê–¢</b></p>
        <button class="spin-btn" style="margin-top: 20px; padding: 10px 30px; font-size: 14px;" onclick="closeJackpot()">–ó–ê–ë–†–ê–¢–¨</button>
    </div>

    <div class="balance-top">
        <div class="bal">ü™ô <span id="coins">0</span></div>
        <div class="bal">üíé <span id="crystals">0</span></div>
    </div>

    <div class="wheel-container">
        <div class="pointer"></div>
        <div class="center-cap">üíé</div>
        <div class="wheel" id="wheel">
            </div>
    </div>

    <div class="controls">
        <button id="spinBtn" class="spin-btn" onclick="spin()">–ö–†–£–¢–ò–¢–¨</button>
        <div id="timer" style="margin-top: 15px; color: var(--gold); font-weight: bold; opacity: 0.8;">...</div>
        <a href="index.html" style="margin-top: 20px; color: #666; display: block; text-decoration: none; font-size: 13px;">–í–ï–†–ù–£–¢–¨–°–Ø –ö –ö–õ–ò–ö–ê–ú</a>
    </div>

<script>
    let state = {
        coins: +localStorage.getItem("coins") || 0,
        crystals: +localStorage.getItem("crystals") || 0,
        lastSpin: +localStorage.getItem("lastSpinTime") || 0,
        ownedHeroes: JSON.parse(localStorage.getItem("characters")) || { default: true }
    };

    const prizes = [
        { n: "üíé 500", t: "cry", v: 500 }, { n: "ü™ô 10k", t: "coin", v: 10000 },
        { n: "üíé 10", t: "cry", v: 10 },   { n: "ü™ô 5k", t: "coin", v: 5000 },
        { n: "üíé 200", t: "cry", v: 200 }, { n: "ü™ô 1k", t: "coin", v: 1000 },
        { n: "üíé 50", t: "cry", v: 50 },   { n: "ü™ô 500", t: "coin", v: 500 }
    ];

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∫–æ–ª–µ—Å–µ
    const wheel = document.getElementById("wheel");
    prizes.forEach((p, i) => {
        const div = document.createElement("div");
        div.className = "segment";
        div.style.transform = `rotate(${i * 45 + 22.5}deg) rotate(-90deg)`;
        div.innerHTML = p.n;
        wheel.appendChild(div);
    });

    function updateUI() {
        document.getElementById("coins").textContent = Math.floor(state.coins).toLocaleString();
        document.getElementById("crystals").textContent = state.crystals;
        const diff = Date.now() - state.lastSpin;
        const day = 86400000;
        if (diff < day) {
            document.getElementById("spinBtn").textContent = `–ó–ê 100 üíé`;
            const timeLeft = day - diff;
            const h = Math.floor(timeLeft / 3600000);
            const m = Math.floor((timeLeft % 3600000) / 60000);
            document.getElementById("timer").textContent = `–ë–µ—Å–ø–ª–∞—Ç–Ω–æ —á–µ—Ä–µ–∑: ${h}—á ${m}–º`;
        } else {
            document.getElementById("spinBtn").textContent = "–ë–ï–°–ü–õ–ê–¢–ù–û";
            document.getElementById("timer").textContent = "–£–¥–∞—á–∞ –∂–¥–µ—Ç —Ç–µ–±—è!";
        }
    }

    let isSpinning = false;
    function spin() {
        if (isSpinning) return;
        const now = Date.now();
        const isFree = (now - state.lastSpin) >= 86400000;

        if (!isFree) {
            if (state.crystals < 100) return alert("–ú–∞–ª–æ üíé!");
            state.crystals -= 100;
        } else {
            state.lastSpin = now;
            localStorage.setItem("lastSpinTime", state.lastSpin);
        }

        isSpinning = true;
        document.getElementById("spinBtn").disabled = true;

        // –®–ê–ù–° 0.04% –ù–ê –ú–ê–ì–ù–ê–¢–ê (1 –∏–∑ 2500)
        const magnatChance = Math.random() < 0.0004;
        
        // –û–±—ã—á–Ω—ã–π –≤—ã–±–æ—Ä —Å–µ–∫—Ç–æ—Ä–∞
        let targetSector = Math.floor(Math.random() * 8);
        const roll = Math.random();
        if (roll < 0.05) targetSector = 0; // 5% –Ω–∞ –¥–∂–µ–∫–ø–æ—Ç 500üíé

        const totalRot = 3600 + (360 - (targetSector * 45));
        wheel.style.transform = `rotate(${totalRot}deg)`;

        setTimeout(() => {
            isSpinning = false;
            document.getElementById("spinBtn").disabled = false;
            
            if (magnatChance) {
                state.ownedHeroes["magnate"] = true;
                localStorage.setItem("characters", JSON.stringify(state.ownedHeroes));
                document.getElementById("jackpotBox").style.display = "block";
            }

            const prize = prizes[targetSector];
            if (prize.t === "coin") state.coins += prize.v;
            else state.crystals += prize.v;

            localStorage.setItem("coins", state.coins);
            localStorage.setItem("crystals", state.crystals);
            updateUI();
            
            // –°–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–∏ –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏
            wheel.style.transition = "none";
            wheel.style.transform = `rotate(${totalRot % 360}deg)`;
            setTimeout(() => wheel.style.transition = "transform 5s cubic-bezier(0.15, 0, 0.15, 1)", 50);
        }, 5100);
    }

    function closeJackpot() { document.getElementById("jackpotBox").style.display = "none"; }
    updateUI();
</script>
</body>
</html>
