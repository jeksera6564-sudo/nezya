<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Nezi</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  width: 100vw;
  height: 100vh;
  background: center / cover no-repeat;
  font-family: Arial, sans-serif;
  overflow: hidden;
  user-select: none;
}

.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
}

/* ===== –í–ï–†–• ===== */
.top-bar {
  position: absolute;
  top: 16px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 3;
}

.coins {
  background: rgba(0,0,0,0.65);
  padding: 10px 18px;
  border-radius: 20px;
  color: #fff;
  font-weight: 900;
  font-size: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.coin {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #fff9c4, #fbc02d);
  box-shadow: inset 0 0 4px rgba(0,0,0,0.5);
}

/* ===== –ò–ì–†–ê ===== */
.game {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
}

.character {
  width: 320px;
  max-width: 85vw;
  transition: transform 0.12s ease;
}

/* ===== –¶–ò–§–†–´ ===== */
.float {
  position: absolute;
  font-size: 38px;
  font-weight: 900;
  color: rgba(255, 235, 59, 0.9);
  pointer-events: none;
  animation: fly 2.3s ease-out forwards;
  text-shadow:
    0 0 10px #fff,
    0 0 28px #ffeb3b,
    0 4px 14px rgba(0,0,0,0.9);
}

@keyframes fly {
  from {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
  to {
    opacity: 0;
    transform: translate(var(--x), var(--y)) scale(1.6);
  }
}

/* ===== –ù–ò–ó ===== */
.bottom-menu {
  position: absolute;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 14px;
  z-index: 3;
}

.menu-btn {
  padding: 12px 16px;
  border-radius: 18px;
  background: rgba(0,0,0,0.65);
  color: #fff;
  font-weight: 900;
  font-size: 15px;
  text-decoration: none;
  transition: transform 0.15s ease;
}

.menu-btn:active {
  transform: scale(0.95);
}
</style>
</head>

<body>

<div class="overlay"></div>

<!-- –í–ï–†–• -->
<div class="top-bar">
  <div class="coins">
    <div class="coin"></div>
    <span id="coins">0</span>
  </div>
</div>

<!-- –ò–ì–†–ê -->
<div class="game">
  <img src="character.png" class="character" id="character">
</div>

<!-- –ù–ò–ó -->
<div class="bottom-menu">
  <a href="#" class="menu-btn">üõí –ú–∞–≥–∞–∑–∏–Ω</a>
  <a href="#" class="menu-btn">üßç –ü–µ—Ä—Å–æ–Ω–∞–∂–∏</a>
  <a href="#" class="menu-btn">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
</div>

<script>
/* === –§–û–ù === */
const bg = localStorage.getItem("background") || "bg.jpg";
document.body.style.backgroundImage = `url(${bg})`;

/* === –î–ê–ù–ù–´–ï === */
let coins = parseInt(localStorage.getItem("coins")) || 0;
let combo = parseInt(localStorage.getItem("combo")) || 1;

/* === –≠–õ–ï–ú–ï–ù–¢–´ === */
const coinsEl = document.getElementById("coins");
const character = document.getElementById("character");

coinsEl.textContent = coins;

/* === –¢–ê–ü === */
character.addEventListener("click", () => {
  let chance = Math.max(60 - (combo - 1) * 5, 5);

  if (Math.random() * 100 < chance && combo < 20) {
    combo++;
  } else {
    combo = 1;
  }

  coins += combo;

  localStorage.setItem("coins", coins);
  localStorage.setItem("combo", combo);

  coinsEl.textContent = coins;

  character.style.transform = "scale(0.9)";
  setTimeout(() => character.style.transform = "scale(1)", 120);

  spawnNumber("+" + combo);
});

/* === –¶–ò–§–†–´ === */
function spawnNumber(text) {
  const rect = character.getBoundingClientRect();

  const el = document.createElement("div");
  el.className = "float";
  el.textContent = text;

  el.style.left = rect.left + rect.width / 2 + "px";
  el.style.top = rect.top + rect.height / 2 + "px";

  const angle = Math.random() * Math.PI * 2;
  const distance = 150 + Math.random() * 60;

  el.style.setProperty("--x", Math.cos(angle) * distance + "px");
  el.style.setProperty("--y", Math.sin(angle) * distance + "px");

  document.body.appendChild(el);
  setTimeout(() => el.remove(), 2300);
}
</script>

</body>
</html>
