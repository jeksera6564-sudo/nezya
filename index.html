<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>–ú–∞–≥–∞–∑–∏–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  width:100vw;
  height:100vh;
  background:url(bg.jpg) center/cover no-repeat;
  font-family:Arial,sans-serif;
  overflow:hidden;
  color:white;
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
}

.top{
  position:absolute;
  top:14px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:14px;
  z-index:2;
}

.balance{
  background:rgba(0,0,0,.65);
  padding:10px 16px;
  border-radius:20px;
  font-weight:900;
  display:flex;
  gap:8px;
  align-items:center;
}

.coin{width:18px;height:18px;border-radius:50%;background:gold}
.crystal{
  width:16px;height:16px;
  clip-path:polygon(50% 0%,90% 25%,70% 100%,30% 100%,10% 25%);
  background:#4fc3f7;
}

.shop{
  position:absolute;
  inset:80px 10px 20px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:14px;
  z-index:2;
}

.card{
  background:rgba(0,0,0,.65);
  border-radius:18px;
  padding:10px;
  text-align:center;
  position:relative;
}

.card img{
  width:100%;
  border-radius:12px;
}

.name{font-weight:900;margin:6px 0}
.rarity{font-size:13px;opacity:.85}

.price{
  margin-top:6px;
  font-weight:900;
}

.buy{
  margin-top:8px;
  padding:8px;
  border-radius:14px;
  background:gold;
  color:black;
  font-weight:900;
  cursor:pointer;
}

.lock{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.75);
  border-radius:18px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
}

.buy.anim{
  animation:pop .4s ease;
}

@keyframes pop{
  50%{transform:scale(1.15)}
}
</style>
</head>

<body>

<div class="overlay"></div>

<div class="top">
  <div class="balance"><div class="coin"></div><span id="coins">0</span></div>
  <div class="balance"><div class="crystal"></div><span id="crystals">0</span></div>
</div>

<div class="shop" id="shop"></div>

<script>
let coins = +localStorage.getItem("coins") || 0;
let crystals = +localStorage.getItem("crystals") || 0;
let clicks = +localStorage.getItem("clicks") || 0;

const level = Math.floor(clicks / 100) + 1;

const characters = [
 {id:1,name:"Nezya",img:"char1.png",price:0,currency:"coin",rarity:"–û–±—ã—á–Ω—ã–π",level:1},
 {id:2,name:"Aiko",img:"char2.png",price:500,currency:"coin",rarity:"–†–µ–¥–∫–∏–π",level:10},
 {id:3,name:"Rin",img:"char3.png",price:2000,currency:"coin",rarity:"–≠–ø–∏—á–µ—Å–∫–∏–π",level:25},
 {id:4,name:"Kira",img:"char4.png",price:1000,currency:"crystal",rarity:"–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π",level:50},
 {id:5,name:"Yume",img:"char5.png",price:1500,currency:"crystal",rarity:"–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π",level:100}
];

const owned = JSON.parse(localStorage.getItem("ownedChars")) || [1];
const shop = document.getElementById("shop");

document.getElementById("coins").textContent = coins;
document.getElementById("crystals").textContent = crystals;

characters.forEach(c=>{
  const card=document.createElement("div");
  card.className="card";

  card.innerHTML=`
    <img src="${c.img}">
    <div class="name">${c.name}</div>
    <div class="rarity">${c.rarity}</div>
    <div class="price">${c.price===0?"–ë–µ—Å–ø–ª–∞—Ç–Ω–æ":c.price+" "+(c.currency==="coin"?"ü™ô":"üíé")}</div>
  `;

  if(owned.includes(c.id)){
    const btn=document.createElement("div");
    btn.className="buy";
    btn.textContent="–í—ã–±—Ä–∞—Ç—å";
    btn.onclick=()=>{
      localStorage.setItem("character",c.img);
      btn.classList.add("anim");
    };
    card.appendChild(btn);
  }else if(level<c.level){
    const lock=document.createElement("div");
    lock.className="lock";
    lock.textContent="üîí –£—Ä–æ–≤–µ–Ω—å "+c.level;
    card.appendChild(lock);
  }else{
    const btn=document.createElement("div");
    btn.className="buy";
    btn.textContent="–ö—É–ø–∏—Ç—å";
    btn.onclick=()=>{
      if(c.currency==="coin" && coins>=c.price){
        coins-=c.price;
      }else if(c.currency==="crystal" && crystals>=c.price){
        crystals-=c.price;
      }else return;

      owned.push(c.id);
      localStorage.setItem("ownedChars",JSON.stringify(owned));
      localStorage.setItem("coins",coins);
      localStorage.setItem("crystals",crystals);
      location.reload();
    };
    card.appendChild(btn);
  }

  shop.appendChild(card);
});
</script>

</body>
</html>
