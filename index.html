<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Nezya</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  width: 100vw;
  height: 100vh;
  background: center / cover no-repeat;
  font-family: Arial, sans-serif;
  overflow: hidden;
  user-select: none;
}

/* –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
}

/* –≤–µ—Ä—Ö */
.top-bar {
  position: absolute;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  gap: 8px;
  z-index: 3;
  align-items: center;
}

.balances {
  display: flex;
  gap: 12px;
}

.balance {
  background: rgba(0,0,0,0.65);
  padding: 10px 16px;
  border-radius: 20px;
  font-weight: 900;
  color: #fff;
  display: flex;
  gap: 8px;
  align-items: center;
}

.coin {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #fff9c4, #fbc02d);
}

.crystal {
  width: 18px;
  height: 18px;
  clip-path: polygon(50% 0%, 90% 25%, 70% 100%, 30% 100%, 10% 25%);
  background: linear-gradient(135deg, #7dd3fc, #38bdf8);
}

/* —É—Ä–æ–≤–µ–Ω—å */
.level-wrap {
  width: 200px;
  background: rgba(0,0,0,0.6);
  border-radius: 10px;
  padding: 4px;
}

.level-bar {
  height: 10px;
  width: 0%;
  background: gold;
  border-radius: 6px;
}

.level-text {
  text-align: center;
  font-size: 13px;
  font-weight: bold;
  color: white;
  margin-top: 4px;
}

/* –∏–≥—Ä–∞ */
.game {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
}

.character {
  width: 320px;
  max-width: 85vw;
  transition: transform 0.12s ease;
  cursor: pointer;
}

/* —Ü–∏—Ñ—Ä—ã */
.float {
  position: absolute;
  font-size: 36px;
  font-weight: 900;
  color: gold;
  pointer-events: none;
  animation: fly 2s ease-out forwards;
}

@keyframes fly {
  to {
    opacity: 0;
    transform: translate(var(--x), var(--y)) scale(1.5);
  }
}

/* –Ω–∏–∑ */
.bottom-menu {
  position: absolute;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 14px;
  z-index: 3;
}

.menu-btn {
  padding: 12px 16px;
  border-radius: 18px;
  background: rgba(0,0,0,0.65);
  color: white;
  font-weight: 900;
  text-decoration: none;
}
</style>
</head>

<body>

<div class="overlay"></div>

<div class="top-bar">
  <div class="balances">
    <div class="balance"><div class="coin"></div><span id="coins">0</span></div>
    <div class="balance"><div class="crystal"></div><span id="crystals">0</span></div>
  </div>

  <div class="level-wrap">
    <div class="level-bar" id="levelBar"></div>
    <div class="level-text">–£—Ä–æ–≤–µ–Ω—å <span id="level">1</span></div>
  </div>
</div>

<div class="game">
  <img src="character.png" class="character" id="character">
</div>

<div class="bottom-menu">
  <a href="shop.html" class="menu-btn">üõí –ú–∞–≥–∞–∑–∏–Ω</a>
  <a href="#" class="menu-btn">üßç –ü–µ—Ä—Å–æ–Ω–∞–∂–∏</a>
</div>

<script>
/* —Ñ–æ–Ω */
const bg = localStorage.getItem("background") || "bg.jpg";
document.body.style.backgroundImage = `url(${bg})`;

/* –¥–∞–Ω–Ω—ã–µ */
let coins = +localStorage.getItem("coins") || 0;
let crystals = +localStorage.getItem("crystals") || 0;
let clicks = +localStorage.getItem("clicks") || 0;

const coinsEl = document.getElementById("coins");
const crystalsEl = document.getElementById("crystals");
const levelEl = document.getElementById("level");
const levelBar = document.getElementById("levelBar");
const character = document.getElementById("character");

function updateUI() {
  coinsEl.textContent = coins;
  crystalsEl.textContent = crystals;

  const level = Math.floor(clicks / 100) + 1;
  const progress = (clicks % 100);

  levelEl.textContent = level;
  levelBar.style.width = progress + "%";
}

character.onclick = () => {
  clicks++;
  coins++;

  character.style.transform = "scale(0.9)";
  setTimeout(() => character.style.transform = "scale(1)", 120);

  spawn("+1");
  save();
  updateUI();
};

function spawn(text) {
  const r = character.getBoundingClientRect();
  const el = document.createElement("div");
  el.className = "float";
  el.textContent = text;
  el.style.left = r.left + r.width / 2 + "px";
  el.style.top = r.top + r.height / 2 + "px";
  el.style.setProperty("--x", (Math.random()*200-100)+"px");
  el.style.setProperty("--y", (-Math.random()*150-50)+"px");
  document.body.appendChild(el);
  setTimeout(()=>el.remove(),2000);
}

function save() {
  localStorage.setItem("coins", coins);
  localStorage.setItem("crystals", crystals);
  localStorage.setItem("clicks", clicks);
}

updateUI();
</script>

</body>
</html>
