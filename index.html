<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Nezya</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{
  width:100vw;height:100vh;
  font-family:Arial,sans-serif;
  background:#0b0b0b;
  overflow:hidden;
  color:white;
  user-select:none;
}

/* ===== –§–û–ù ===== */
.bg{
  position:fixed;inset:0;
  background:
    linear-gradient(rgba(0,0,0,.5),rgba(0,0,0,.7)),
    url("assets/bg.jpg") center/cover no-repeat;
  z-index:-1;
}

/* ===== –í–ï–†–• ===== */
.top{
  position:absolute;top:10px;left:50%;
  transform:translateX(-50%);
  display:flex;flex-direction:column;
  align-items:center;gap:6px;
}

.balances{display:flex;gap:10px}
.balance{
  background:rgba(0,0,0,.65);
  padding:8px 14px;
  border-radius:18px;
  font-weight:900;
  display:flex;gap:6px;align-items:center
}
.coin{width:18px;height:18px;border-radius:50%;background:gold}
.crystal{width:16px;height:16px;clip-path:polygon(50% 0%,90% 25%,70% 100%,30% 100%,10% 25%);background:#38bdf8}

.level-wrap{
  width:200px;
  background:rgba(0,0,0,.6);
  border-radius:12px;
  padding:5px;
}
.level-bar{height:10px;background:gold;border-radius:8px;width:0%}
.level-text{text-align:center;font-size:12px;font-weight:bold}

.combo{
  font-weight:900;
  color:#22c55e;
  text-shadow:0 0 10px #22c55e;
}

/* ===== –ò–ì–†–ê ===== */
.game{
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
}
.character{
  width:260px;
  max-width:80vw;
  cursor:pointer;
  transition:.12s;
}
.character:active{transform:scale(.95)}

/* ===== –ö–ù–û–ü–ö–ò ===== */
.menu{
  position:absolute;
  bottom:20%;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:12px;
}
.menu button{
  padding:12px 18px;
  border-radius:18px;
  border:none;
  background:rgba(0,0,0,.65);
  color:white;
  font-weight:900;
}

/* ===== –≠–ö–†–ê–ù–´ ===== */
.screen{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.92);
  display:none;
  overflow:auto;
  z-index:50;
}

/* ===== –ü–ï–†–°–û–ù–ê–ñ–ò / –ú–ê–ì–ê–ó–ò–ù ===== */
.list{
  padding:20px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:14px;
}
.card{
  background:rgba(255,255,255,.12);
  border-radius:16px;
  padding:12px;
  text-align:center;
}
.card img{
  width:100%;
  max-width:120px;
}
.card button{
  margin-top:6px;
  padding:6px 14px;
  border-radius:14px;
  border:none;
  background:gold;
  font-weight:bold;
}
.card.active{outline:3px solid #22c55e}

/* ===== –¢–û–ü ===== */
.lb{
  padding:20px;
}
.lb-row{
  display:flex;
  justify-content:space-between;
  padding:6px 0;
  border-bottom:1px solid #fff2;
}

/* ===== –ó–ê–ö–†–´–¢–¨ ===== */
.close{
  display:block;
  margin:10px auto;
  padding:10px 20px;
  border-radius:20px;
  border:none;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="bg"></div>

<!-- –í–ï–†–• -->
<div class="top">
  <div class="balances">
    <div class="balance"><div class="coin"></div><span id="coins">0</span></div>
    <div class="balance"><div class="crystal"></div><span id="crystals">0</span></div>
  </div>
  <div class="level-wrap">
    <div class="level-bar" id="levelBar"></div>
    <div class="level-text">–£—Ä–æ–≤–µ–Ω—å <span id="level">1</span></div>
  </div>
  <div class="combo" id="combo">–ö–æ–º–±–æ x1</div>
</div>

<!-- –ò–ì–†–ê -->
<div class="game">
  <img id="character" class="character">
</div>

<!-- –ú–ï–ù–Æ -->
<div class="menu">
  <button onclick="openScreen('characters')">üßç</button>
  <button onclick="openScreen('shop')">üõí</button>
  <button onclick="openScreen('top')">üèÜ</button>
</div>

<!-- –ü–ï–†–°–û–ù–ê–ñ–ò -->
<div class="screen" id="characters">
  <h2 style="text-align:center">–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</h2>
  <div class="list" id="charList"></div>
  <button class="close" onclick="closeScreens()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<!-- –ú–ê–ì–ê–ó–ò–ù -->
<div class="screen" id="shop">
  <h2 style="text-align:center">–ú–∞–≥–∞–∑–∏–Ω</h2>
  <div class="list" id="shopList"></div>
  <button class="close" onclick="closeScreens()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<!-- –¢–û–ü -->
<div class="screen" id="top">
  <h2 style="text-align:center">–õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–æ–ø</h2>
  <div class="lb" id="topList"></div>
  <button class="close" onclick="closeScreens()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<script>
/* ===== –î–ê–ù–ù–´–ï ===== */
let coins=+localStorage.getItem("coins")||0;
let crystals=+localStorage.getItem("crystals")||0;
let clicks=+localStorage.getItem("clicks")||0;
let combo=1,lastClick=0;

const characters=[
 {id:"default",name:"–ù–æ–≤–∏—á–æ–∫",img:"assets/player.png",power:1,price:0},
 {id:"clicker",name:"–ö–ª–∏–∫–µ—Ä",img:"assets/character_clicker.png",power:2,price:5000},
 {id:"business",name:"–ë–∏–∑–Ω–µ—Å",img:"assets/character_business.png",power:4,price:25000}
];

let owned=JSON.parse(localStorage.getItem("owned"))||{default:true};
let active=localStorage.getItem("active")||"default";

/* ===== UI ===== */
const character=document.getElementById("character");
const coinsEl=document.getElementById("coins");
const crystalsEl=document.getElementById("crystals");
const levelEl=document.getElementById("level");
const levelBar=document.getElementById("levelBar");
const comboEl=document.getElementById("combo");

/* ===== –ò–ì–†–ê ===== */
function update(){
  coinsEl.textContent=coins;
  crystalsEl.textContent=crystals;
  const lvl=Math.floor(clicks/100)+1;
  levelEl.textContent=lvl;
  levelBar.style.width=(clicks%100)+"%";
  comboEl.textContent="–ö–æ–º–±–æ x"+combo;
  character.src=characters.find(c=>c.id===active).img;
}

character.onclick=()=>{
  const now=Date.now();
  combo=(now-lastClick<700)?Math.min(combo+1,10):1;
  lastClick=now;
  coins+=characters.find(c=>c.id===active).power*combo;
  clicks++;
  update();
};

/* ===== –≠–ö–†–ê–ù–´ ===== */
function openScreen(id){
  document.getElementById(id).style.display="block";
  if(id==="characters")renderChars();
  if(id==="shop")renderShop();
  if(id==="top")renderTop();
}
function closeScreens(){
  document.querySelectorAll(".screen").forEach(s=>s.style.display="none");
}

/* ===== –ü–ï–†–°–û–ù–ê–ñ–ò ===== */
function renderChars(){
  const list=document.getElementById("charList");
  list.innerHTML="";
  characters.forEach(c=>{
    if(!owned[c.id])return;
    const d=document.createElement("div");
    d.className="card"+(active===c.id?" active":"");
    d.innerHTML=`<img src="${c.img}"><p>${c.name}</p>`;
    const b=document.createElement("button");
    b.textContent=active===c.id?"–í—ã–±—Ä–∞–Ω":"–í—ã–±—Ä–∞—Ç—å";
    b.onclick=()=>{active=c.id;save()};
    d.appendChild(b);
    list.appendChild(d);
  });
}

/* ===== –ú–ê–ì–ê–ó–ò–ù ===== */
function renderShop(){
  const list=document.getElementById("shopList");
  list.innerHTML="";
  characters.forEach(c=>{
    if(owned[c.id])return;
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`<img src="${c.img}"><p>${c.name}</p><p>${c.price} ü™ô</p>`;
    const b=document.createElement("button");
    b.textContent="–ö—É–ø–∏—Ç—å";
    b.onclick=()=>{
      if(coins<c.price)return;
      coins-=c.price;
      owned[c.id]=true;
      active=c.id;
      save();
    };
    d.appendChild(b);
    list.appendChild(d);
  });
}

/* ===== –¢–û–ü ===== */
function renderTop(){
  const list=document.getElementById("topList");
  list.innerHTML=`<div class="lb-row"><span>–í—ã</span><span>${coins}</span></div>`;
}

/* ===== SAVE ===== */
function save(){
  localStorage.setItem("coins",coins);
  localStorage.setItem("crystals",crystals);
  localStorage.setItem("clicks",clicks);
  localStorage.setItem("owned",JSON.stringify(owned));
  localStorage.setItem("active",active);
  update();
}

setInterval(save,3000);
update();
</script>

</body>
</html>
